{
  "resourceType": "Measure",
  "id": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR",
  "meta": {
    "profile": [ "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm", "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/publishable-measure-cqfm", "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/executable-measure-cqfm" ]
  },
  "contained": [ {
    "resourceType": "Library",
    "id": "effective-data-requirements",
    "extension": [ {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "254292007",
        "display": "Tumor staging (tumor staging)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
        "code": "active",
        "display": "Active"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/condition-ver-status",
        "code": "unconfirmed",
        "display": "Unconfirmed"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/condition-ver-status",
        "code": "refuted",
        "display": "Refuted"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/condition-ver-status",
        "code": "entered-in-error",
        "display": "Entered in Error"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://loinc.org",
        "code": "21902-2",
        "display": "Stage group.pathology Cancer"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "369935001",
        "display": "T1: Urinary tract tumor invades subepithelial connective tissue (finding)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "369949005",
        "display": "Ta: Noninvasive papillary carcinoma (urinary tract) (finding)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "369934002",
        "display": "Tis: Carcinoma in situ (flat tumor of urinary bladder) (finding)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://hl7.org/fhir/sid/icd-10-cm",
        "code": "D09.0",
        "display": "Carcinoma in situ of bladder"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
        "code": "VR",
        "display": "virtual"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "169331000",
        "display": "Combined radiotherapy (procedure)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "SupplementalDataElements"
      }, {
        "url": "name",
        "valueString": "SDE Sex"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Sex&quot;:\n  case\n      when Patient.gender = &#39;male&#39; then Code { code: &#39;M&#39;, system: &#39;http://hl7.org/fhir/v3/AdministrativeGender&#39;, display: &#39;Male&#39; }\n      when Patient.gender = &#39;female&#39; then Code { code: &#39;F&#39;, system: &#39;http://hl7.org/fhir/v3/AdministrativeGender&#39;, display: &#39;Female&#39; }\n      else null\n    end"
      }, {
        "url": "displaySequence",
        "valueString": "0"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "SDE Sex"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Sex&quot;:\n  SDE.&quot;SDE Sex&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "1"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Bladder Cancer Diagnosis"
      }, {
        "url": "statement",
        "valueString": "define &quot;Bladder Cancer Diagnosis&quot;:\n  [Condition: &quot;Bladder Cancer for Urology Care&quot;] BladderCancer\n    where BladderCancer.prevalenceInterval ( ) starts before end of &quot;Measurement Period&quot;\n      and BladderCancer.isConfirmedActiveDiagnosis ( )"
      }, {
        "url": "displaySequence",
        "valueString": "2"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "First Bladder Cancer Staging Procedure"
      }, {
        "url": "statement",
        "valueString": "define &quot;First Bladder Cancer Staging Procedure&quot;:\n  First([Procedure: &quot;Tumor staging (tumor staging)&quot;] BladderCancerStaging\n      with &quot;Bladder Cancer Diagnosis&quot; BladderCancer\n        such that BladderCancerStaging.performed.toInterval() starts on or before day of start BladderCancer.prevalenceInterval()\n          and BladderCancerStaging.performed.toInterval() overlaps day of BladderCancer.prevalenceInterval()\n      where BladderCancerStaging.status = &#39;completed&#39;\n      sort by start of performed.toInterval()\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "3"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "First BCG Administered"
      }, {
        "url": "statement",
        "valueString": "define &quot;First BCG Administered&quot;:\n  First([MedicationAdministration: &quot;BCG Bacillus Calmette Guerin for Urology Care&quot;] BCG\n      with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n        such that BCG.effective.toInterval() starts 6 months or less after start of FirstBladderCancerStaging.performed.toInterval()\n          and BCG.effective.toInterval() starts during &quot;Measurement Period&quot;\n      where BCG.status in { &#39;in-progress&#39;, &#39;completed&#39; }\n      sort by start of effective.toInterval()\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "4"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Numerator"
      }, {
        "url": "statement",
        "valueString": "define &quot;Numerator&quot;:\n  &quot;First BCG Administered&quot; is not null"
      }, {
        "url": "displaySequence",
        "valueString": "5"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "BCG Not Available Within 6 Months After Bladder Cancer Staging"
      }, {
        "url": "statement",
        "valueString": "define &quot;BCG Not Available Within 6 Months After Bladder Cancer Staging&quot;:\n  [MedicationAdministrationNotDone: &quot;BCG Bacillus Calmette Guerin for Urology Care&quot;] BCGNotGiven\n    with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n      such that BCGNotGiven.recorded 6 months or less after start of FirstBladderCancerStaging.performed.toInterval ( )\n        and BCGNotGiven.recorded during &quot;Measurement Period&quot;\n    where BCGNotGiven.statusReason in &quot;Unavailability of Bacillus Calmette Guerin for urology care&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "6"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Denominator Exception"
      }, {
        "url": "statement",
        "valueString": "define &quot;Denominator Exception&quot;:\n  exists &quot;BCG Not Available Within 6 Months After Bladder Cancer Staging&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "7"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "July 1 of Year Prior to the Measurement Period"
      }, {
        "url": "statement",
        "valueString": "define &quot;July 1 of Year Prior to the Measurement Period&quot;:\n  DateTime((year from start of &quot;Measurement Period&quot; - 1), 7, 1, 0, 0, 0, 0, 0)"
      }, {
        "url": "displaySequence",
        "valueString": "8"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "June 30 of the Measurement Period"
      }, {
        "url": "statement",
        "valueString": "define &quot;June 30 of the Measurement Period&quot;:\n  DateTime((year from start of &quot;Measurement Period&quot;), 6, 30, 23, 59, 59, 0, 0)"
      }, {
        "url": "displaySequence",
        "valueString": "9"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "First Qualifying Bladder Cancer Staging Procedure"
      }, {
        "url": "statement",
        "valueString": "define &quot;First Qualifying Bladder Cancer Staging Procedure&quot;:\n  &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n    where FirstBladderCancerStaging.performed.toInterval ( ) during day of Interval[&quot;July 1 of Year Prior to the Measurement Period&quot;, &quot;June 30 of the Measurement Period&quot;]"
      }, {
        "url": "displaySequence",
        "valueString": "10"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period"
      }, {
        "url": "statement",
        "valueString": "define &quot;First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period&quot;:\n  &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n    where FirstBladderCancerStaging.performed.toInterval ( ) during day of Interval[&quot;July 1 of Year Prior to the Measurement Period&quot;, &quot;June 30 of the Measurement Period&quot;]"
      }, {
        "url": "displaySequence",
        "valueString": "11"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1"
      }, {
        "url": "statement",
        "valueString": "/*Ta High Grade only to be included.  Ta low grade is to be excluded from this measure.*/\n\n\ndefine &quot;Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1&quot;:\n  exists ( [Observation: &quot;Stage group.pathology Cancer&quot;] StagingObservation\n      where StagingObservation.getStagingProcedure ( ) is not null\n        and ( StagingObservation.value as Concept ~ &quot;T1: Urinary tract tumor invades subepithelial connective tissue (finding)&quot;\n            or StagingObservation.value as Concept ~ &quot;Ta: Noninvasive papillary carcinoma (urinary tract) (finding)&quot;\n            or StagingObservation.value as Concept ~ &quot;Tis: Carcinoma in situ (flat tumor of urinary bladder) (finding)&quot;\n            or StagingObservation.value as Concept ~ &quot;Carcinoma in situ of bladder&quot;\n        )\n        and StagingObservation.status in { &#39;final&#39;, &#39;amended&#39;, &#39;corrected&#39; }\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "12"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Has Qualifying Encounter"
      }, {
        "url": "statement",
        "valueString": "define &quot;Has Qualifying Encounter&quot;:\n  exists ( [Encounter: &quot;Office Visit&quot;] ValidEncounter\n      where ValidEncounter.period during &quot;Measurement Period&quot;\n        and ValidEncounter.class !~ &quot;virtual&quot;\n        and ValidEncounter.status = &#39;finished&#39;\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "13"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Initial Population"
      }, {
        "url": "statement",
        "valueString": "define &quot;Initial Population&quot;:\n  &quot;First Qualifying Bladder Cancer Staging Procedure&quot; is not null\n    and &quot;Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1&quot;\n    and &quot;Has Qualifying Encounter&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "14"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Denominator"
      }, {
        "url": "statement",
        "valueString": "define &quot;Denominator&quot;:\n  &quot;Initial Population&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "15"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "SupplementalDataElements"
      }, {
        "url": "name",
        "valueString": "SDE Payer"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Payer&quot;:\n  [Coverage: type in &quot;Payer Type&quot;] Payer\n    return {\n      code: Payer.type,\n      period: Payer.period\n    }"
      }, {
        "url": "displaySequence",
        "valueString": "16"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "SDE Payer"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Payer&quot;:\n  SDE.&quot;SDE Payer&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "17"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "SupplementalDataElements"
      }, {
        "url": "name",
        "valueString": "SDE Ethnicity"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Ethnicity&quot;:\n  Patient.ethnicity E\n    return Tuple {\n      codes: { E.ombCategory } union E.detailed,\n      display: E.text\n    }"
      }, {
        "url": "displaySequence",
        "valueString": "18"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "SDE Ethnicity"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Ethnicity&quot;:\n  SDE.&quot;SDE Ethnicity&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "19"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Acute Tuberculosis Diagnosis"
      }, {
        "url": "statement",
        "valueString": "define &quot;Acute Tuberculosis Diagnosis&quot;:\n  [Condition: &quot;Active Tuberculosis for Urology Care&quot;] ActiveTuberculosis\n    with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n      such that ActiveTuberculosis.prevalenceInterval ( ) overlaps after FirstBladderCancerStaging.performed.toInterval ( )\n    where ActiveTuberculosis.isConfirmedActiveDiagnosis ( )"
      }, {
        "url": "displaySequence",
        "valueString": "20"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Immunosuppressive Drugs"
      }, {
        "url": "statement",
        "valueString": "define &quot;Immunosuppressive Drugs&quot;:\n  [MedicationRequest: &quot;Immunosuppressive Drugs for Urology Care&quot;] ImmunosuppressiveDrugs\n    let medicationPeriod: CMD.MedicationRequestPeriod ( ImmunosuppressiveDrugs )\n    with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n      such that medicationPeriod starts on or before start of FirstBladderCancerStaging.performed.toInterval ( )"
      }, {
        "url": "displaySequence",
        "valueString": "21"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Cystectomy Done"
      }, {
        "url": "statement",
        "valueString": "define &quot;Cystectomy Done&quot;:\n  [Procedure: &quot;Cystectomy for Urology Care&quot;] Cystectomy\n    with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n      such that Cystectomy.performed.toInterval ( ) 6 months or less before start of FirstBladderCancerStaging.performed.toInterval ( )\n    where Cystectomy.status = &#39;completed&#39;"
      }, {
        "url": "displaySequence",
        "valueString": "22"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging"
      }, {
        "url": "statement",
        "valueString": "define &quot;Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging&quot;:\n  exists ( ( [Condition: &quot;HIV&quot;]\n      union [Condition: &quot;Immunocompromised Conditions&quot;]\n      union [Condition: &quot;Mixed histology urothelial cell carcinoma for Urology Care&quot;] ) ExclusionDiagnosis\n      with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n        such that ExclusionDiagnosis.prevalenceInterval ( ) starts on or before start of FirstBladderCancerStaging.performed.toInterval ( )\n      where ExclusionDiagnosis.isConfirmedActiveDiagnosis ( )\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "23"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging"
      }, {
        "url": "statement",
        "valueString": "define &quot;Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging&quot;:\n  exists ( ( [MedicationRequest: &quot;Chemotherapy Agents for Advanced Cancer&quot;] ExclusionMed\n        let medicationPeriod: CMD.MedicationRequestPeriod ( ExclusionMed )\n        with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n          such that medicationPeriod starts 6 months or less before FirstBladderCancerStaging.performed.toInterval ( )\n        where ExclusionMed.status in { &#39;active&#39;, &#39;completed&#39; }\n          and ExclusionMed.intent = &#39;order&#39;\n          and ExclusionMed.doNotPerform is not true\n    )\n      union ( [Procedure: &quot;Combined radiotherapy (procedure)&quot;] ExclusionProcedure\n          with &quot;First Bladder Cancer Staging Procedure&quot; FirstBladderCancerStaging\n            such that ExclusionProcedure.performed.toInterval ( ) starts 6 months or less before FirstBladderCancerStaging.performed.toInterval ( )\n          where ExclusionProcedure.status = &#39;completed&#39;\n      )\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "24"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "Denominator Exclusion"
      }, {
        "url": "statement",
        "valueString": "define &quot;Denominator Exclusion&quot;:\n  exists &quot;Acute Tuberculosis Diagnosis&quot;\n    or exists &quot;Immunosuppressive Drugs&quot;\n    or exists &quot;Cystectomy Done&quot;\n    or &quot;Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging&quot;\n    or &quot;Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "25"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "SupplementalDataElements"
      }, {
        "url": "name",
        "valueString": "SDE Race"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Race&quot;:\n  Patient.race R\n    return Tuple {\n      codes: R.ombCategory union R.detailed,\n      display: R.text\n    }"
      }, {
        "url": "displaySequence",
        "valueString": "26"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "SDE Race"
      }, {
        "url": "statement",
        "valueString": "define &quot;SDE Race&quot;:\n  SDE.&quot;SDE Race&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "27"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "QICoreCommon"
      }, {
        "url": "name",
        "valueString": "prevalenceInterval"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns an interval representing the normalized prevalence period of a given Condition.\n@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from\nonset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting \ninterval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.\n*/\ndefine fluent function prevalenceInterval(condition Condition):\nif condition.clinicalStatus ~ &quot;active&quot;\n  or condition.clinicalStatus ~ &quot;recurrence&quot;\n  or condition.clinicalStatus ~ &quot;relapse&quot; then\n  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]\nelse\n    (end of ToAbatementInterval(condition)) abatementDate\n    return if abatementDate is null then\n      Interval[start of ToInterval(condition.onset), abatementDate)\n    else\n      Interval[start of ToInterval(condition.onset), abatementDate]"
      }, {
        "url": "displaySequence",
        "valueString": "28"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "isConfirmedActiveDiagnosis"
      }, {
        "url": "statement",
        "valueString": "define fluent function isConfirmedActiveDiagnosis(Condition Condition):\n  ( Condition Diagnosis\n      where Diagnosis.clinicalStatus ~ QICoreCommon.&quot;active&quot;\n        and not ( Diagnosis.verificationStatus ~ QICoreCommon.&quot;unconfirmed&quot;\n            or Diagnosis.verificationStatus ~ QICoreCommon.&quot;refuted&quot;\n            or Diagnosis.verificationStatus ~ QICoreCommon.&quot;entered-in-error&quot;\n        )\n  ) is not null"
      }, {
        "url": "displaySequence",
        "valueString": "29"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value uri): value.value"
      }, {
        "url": "displaySequence",
        "valueString": "30"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToConcept"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"
      }, {
        "url": "displaySequence",
        "valueString": "31"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR"
      }, {
        "url": "name",
        "valueString": "getStagingProcedure"
      }, {
        "url": "statement",
        "valueString": "define fluent function getStagingProcedure(StagingObservation Observation):\n  StagingObservation.partOf StagingReference\n    return &quot;First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period&quot; FirstBladderCancerStagingMP\n      where FirstBladderCancerStagingMP.id = StagingReference.reference.getId ( )"
      }, {
        "url": "displaySequence",
        "valueString": "32"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "QICoreCommon"
      }, {
        "url": "name",
        "valueString": "getId"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns the tail of the given uri (i.e. everything after the last slash in the URI).\n@comment: This function can be used to determine the logical id of a given resource. It can be used in\na single-server environment to trace references. However, this function does not attempt to resolve\nor distinguish the base of the given url, and so cannot be used safely in multi-server environments.\n*/\ndefine fluent function getId(uri String):\n  Last(Split(uri, &#39;/&#39;))"
      }, {
        "url": "displaySequence",
        "valueString": "33"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToCode"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"
      }, {
        "url": "displaySequence",
        "valueString": "34"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "CumulativeMedicationDuration"
      }, {
        "url": "name",
        "valueString": "MedicationRequestPeriod"
      }, {
        "url": "statement",
        "valueString": "/*\nNow that we have a ToDaily function, we can approach calculation of the\nduration of medication for an order. First, consider the definitions\nfor each element:\n* 1 and only 1 dosageInstruction\n* 1 and only 1 doseAndRate\n* 1 timing with 1 repeat\n* frequency, frequencyMax, defaulting to 1\n* period, periodUnit, defaulting to 1 &#39;d&#39;\n* doseQuantity or doseRange\n* timeOfDay\n* authoredOn: The date the prescription was written\n* dispenseRequest.validityPeriod: Time period supply is authorized for\n* dispenseRequest.quantity: amount of medication supplied per dispense\n* dispenseRequest.numberOfRepeatsAllowed: number of refills authorized\n* dispenseRequest.expectedSupplyDuration: number of days supply per dispense\n* dosageInstruction.timing.repeat.boundsDuration: total duration of the repeat\n* dosageInstruction.timing.repeat.boundsRange: range of durations of the repeat\n* dosageInstruction.timing.repeat.boundsPeriod: period bounds of the repeat\n* dosageInstruction.timing.repeat.count: number of times to repeat\n* dosageInstruction.timing.repeat.countMax: maximum number of times to repeat\n* dosageInstruction.timing.repeat.frequency: event occurs frequency times per period\n* dosageInstruction.timing.repeat.frequencyMax: event occurs up to frequencyMax times per period\n* dosageInstruction.timing.repeat.period: event occurs frequency times per period\n* dosageInstruction.timing.repeat.periodMax: upper limit of period\n* dosageInstruction.timing.repeat.periodUnit: period duration (s | min | h | d | wk | mo | a)\n* dosageInstruction.timing.repeat.timeOfDay: time of day for the event (0..*)\n* dosageInstruction.timing.repeat.when: event timing (HS | WAKE | C | CM | CD | CV | AC | ACM...)\n* dosageInstruction.timing.code: BID | TID | QID | AM | PM | QD | QOD...\n* dosageInstruction.asNeeded\n* dosageInstruction.doseAndRate.doseQuantity\n* dosageInstruction.doseAndRate.doseRange\nIf expectedSupplyDuration is present, then the duration is\n    expectedSupplyDuration * (1 + numberOfRepeatsAllowed)\nIf expectedSupplyDuration is not present, then it must be calculated based on the quantity, dosage, and frequency:\n    (quantity / (dosage * frequency)) * (1 + numberOfRepeatsAllowed)\n    dosage: Coalesce(end of doseAndRate.doseRange, doseAndRate.doseQuantity)\n    frequency: Coalesce(frequencyMax, frequency)\n    period: Quantity(period, periodUnit)\nIf expectedSupplyDuration is not present and cannot be calculated, and the boundsPeriod is present (and completely specified), we can use that directly\n    dosage.timing.repeat.boundsPeriod\nThis calculation results in a number of days, which can then be turned into a period by anchoring that to the\nstart of the validityPeriod or the authoredOn:\n    Interval[earliestDispensable, earliestDispensable + expectedSupplyDuration - 1]\n    earliestDispensable: Coalesce(start of validityPeriod, authoredOn)\nThe following function illustrates this completely:\n*/\n\n/*\nCalculates the Medication Period for a single MedicationRequest.\nMedicationRequest instances provided to this function are expected\nto conform to the [MMEMedicationRequest](http://build.fhir.org/ig/cqframework/opioid-mme-r4/StructureDefinition-mmemedicationrequest.html)\nprofile, which expects:\n* 1 and only 1 dosageInstruction, multiple dosageInstruction elements will result in an error\n* 1 and only 1 doseAndRate, multiple doseAndRate elements will result in an error\n* 1 timing with 1 repeat, missing timing or repeat elements will result in a null\n* frequency, frequencyMax, defaulting to 1\n* period, periodUnit, defaulting to 1 &#39;d&#39;\n* timeOfDay\n* doseQuantity or doseRange, missing doseQuantity and doseRange will result in a null\nNote that MedicationRequest status is not considered by this calculation, as the\nlist of MedicationRequest instances provided to this function should already have\nconsidered appropriate statuses, depending on the use case, typically `completed`.\n*/\ndefine function MedicationRequestPeriod(Request &quot;MedicationRequest&quot;):\n  Request R\n    let\n      dosage: singleton from R.dosageInstruction,\n      doseAndRate: singleton from dosage.doseAndRate,\n      timing: dosage.timing,\n      frequency: Coalesce(timing.repeat.frequencyMax, timing.repeat.frequency),\n      period: Quantity(timing.repeat.period, timing.repeat.periodUnit),\n      doseRange: doseAndRate.dose,\n      doseQuantity: doseAndRate.dose,\n      dose: Coalesce(end of doseRange, doseQuantity),\n      dosesPerDay: Coalesce(ToDaily(frequency, period), Count(timing.repeat.timeOfDay), 1.0),\n      boundsPeriod: timing.repeat.bounds as Interval&lt;DateTime&gt;,\n      daysSupply: (convert R.dispenseRequest.expectedSupplyDuration to days).value,\n      quantity: R.dispenseRequest.quantity,\n      refills: Coalesce(R.dispenseRequest.numberOfRepeatsAllowed, 0),\n      startDate:\n        Coalesce(\n          date from start of boundsPeriod,\n          date from R.authoredOn,\n          date from start of R.dispenseRequest.validityPeriod\n        ),\n      totalDaysSupplied: Coalesce(daysSupply, quantity.value / (dose.value * dosesPerDay)) * (1 + refills)\n    return\n      if startDate is not null and totalDaysSupplied is not null then\n        Interval[startDate, startDate + Quantity(totalDaysSupplied - 1, &#39;day&#39;) ]\n      else if startDate is not null and boundsPeriod.&quot;high&quot; is not null then\n        Interval[startDate, date from end of boundsPeriod]\n      else\n        null"
      }, {
        "url": "displaySequence",
        "valueString": "35"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "CumulativeMedicationDuration"
      }, {
        "url": "name",
        "valueString": "Quantity"
      }, {
        "url": "statement",
        "valueString": "/**********************************************************************/\n/* Functions in this region are copied from opioid-mme-r4             */\n/**********************************************************************/\n\ndefine function Quantity(value Decimal, unit String):\n  if value is not null then\n    System.Quantity { value: value, unit: unit }\n  else\n    null"
      }, {
        "url": "displaySequence",
        "valueString": "36"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "CumulativeMedicationDuration"
      }, {
        "url": "name",
        "valueString": "ToDaily"
      }, {
        "url": "statement",
        "valueString": "/*\n Goal is to get to number of days\n Two broad approaches to the calculation:\n  1) Based on supply and frequency, calculate the number of expected days the medication will cover/has covered\n  2) Based on relevant period, determine a covered interval and calculate the length of that interval in days\nThis topic covers several use cases and illustrates how to calculate Cumulative\nMedication Duration for each type of medication resource using the supply and\nfrequency approach.\n*/\n\n/*\n  For the first approach, we need to get from frequency to a frequency/day\n  So we define ToDaily\n*/\n\n/*\n  Calculates daily frequency given frequency within a period\n*/\ndefine function ToDaily(frequency System.Integer, period System.Quantity):\n  case period.unit\n    when &#39;h&#39; then frequency * (24.0 / period.value)\n    when &#39;min&#39; then frequency * (24.0 / period.value) * 60\n    when &#39;s&#39; then frequency * (24.0 / period.value) * 60 * 60\n    when &#39;d&#39; then frequency * (24.0 / period.value) / 24\n    when &#39;wk&#39; then frequency * (24.0 / period.value) / (24 * 7)\n    when &#39;mo&#39; then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */\n    when &#39;a&#39; then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */\n    when &#39;hour&#39; then frequency * (24.0 / period.value)\n    when &#39;minute&#39; then frequency * (24.0 / period.value) * 60\n    when &#39;second&#39; then frequency * (24.0 / period.value) * 60 * 60\n    when &#39;day&#39; then frequency * (24.0 / period.value) / 24\n    when &#39;week&#39; then frequency * (24.0 / period.value) / (24 * 7)\n    when &#39;month&#39; then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */\n    when &#39;year&#39; then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */\n    when &#39;hours&#39; then frequency * (24.0 / period.value)\n    when &#39;minutes&#39; then frequency * (24.0 / period.value) * 60\n    when &#39;seconds&#39; then frequency * (24.0 / period.value) * 60 * 60\n    when &#39;days&#39; then frequency * (24.0 / period.value) / 24\n    when &#39;weeks&#39; then frequency * (24.0 / period.value) / (24 * 7)\n    when &#39;months&#39; then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */\n    when &#39;years&#39; then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */\n    else Message(null, true, &#39;CMDLogic.ToDaily.UnknownUnit&#39;, ErrorLevel, &#39;Unknown unit &#39; &amp; period.unit)\n  end"
      }, {
        "url": "displaySequence",
        "valueString": "37"
      } ]
    } ],
    "status": "active",
    "type": {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/library-type",
        "code": "module-definition"
      } ]
    },
    "relatedArtifact": [ {
      "type": "depends-on",
      "display": "Library SDE",
      "resource": "Library/SupplementalDataElements|3.4.000"
    }, {
      "type": "depends-on",
      "display": "Library QICoreCommon",
      "resource": "Library/QICoreCommon|2.0.000"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "Library/FHIRHelpers|4.3.000"
    }, {
      "type": "depends-on",
      "display": "Library CMD",
      "resource": "Library/CumulativeMedicationDuration|4.0.000"
    }, {
      "type": "depends-on",
      "display": "Code system SNOMEDCT",
      "resource": "http://snomed.info/sct"
    }, {
      "type": "depends-on",
      "display": "Code system ConditionClinicalStatusCodes",
      "resource": "http://terminology.hl7.org/CodeSystem/condition-clinical"
    }, {
      "type": "depends-on",
      "display": "Code system ConditionVerificationStatusCodes",
      "resource": "http://terminology.hl7.org/CodeSystem/condition-ver-status"
    }, {
      "type": "depends-on",
      "display": "Code system LOINC",
      "resource": "http://loinc.org"
    }, {
      "type": "depends-on",
      "display": "Code system ICD10CM",
      "resource": "http://hl7.org/fhir/sid/icd-10-cm"
    }, {
      "type": "depends-on",
      "display": "Code system ActCode",
      "resource": "http://terminology.hl7.org/CodeSystem/v3-ActCode"
    }, {
      "type": "depends-on",
      "display": "Value set BCG Bacillus Calmette Guerin for Urology Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.52"
    }, {
      "type": "depends-on",
      "display": "Value set Bladder Cancer for Urology Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.45"
    }, {
      "type": "depends-on",
      "display": "Value set Unavailability of Bacillus Calmette Guerin for urology care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.44"
    }, {
      "type": "depends-on",
      "display": "Value set Office Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"
    }, {
      "type": "depends-on",
      "display": "Value set Payer Type",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"
    }, {
      "type": "depends-on",
      "display": "Value set Active Tuberculosis for Urology Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.56"
    }, {
      "type": "depends-on",
      "display": "Value set Immunosuppressive Drugs for Urology Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.32"
    }, {
      "type": "depends-on",
      "display": "Value set Cystectomy for Urology Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.55"
    }, {
      "type": "depends-on",
      "display": "Value set HIV",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.120.12.1003"
    }, {
      "type": "depends-on",
      "display": "Value set Immunocompromised Conditions",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.1940"
    }, {
      "type": "depends-on",
      "display": "Value set Mixed histology urothelial cell carcinoma for Urology Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.39"
    }, {
      "type": "depends-on",
      "display": "Value set Chemotherapy Agents for Advanced Cancer",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.60"
    } ],
    "parameter": [ {
      "name": "Measurement Period",
      "use": "in",
      "min": 0,
      "max": "1",
      "type": "Period"
    }, {
      "name": "ErrorLevel",
      "use": "in",
      "min": 0,
      "max": "1",
      "type": "string"
    }, {
      "name": "Numerator",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Denominator Exception",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Denominator",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Initial Population",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Denominator Exclusion",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "SDE Sex",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "Coding"
    }, {
      "name": "SDE Payer",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Resource"
    }, {
      "name": "SDE Ethnicity",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "Resource"
    }, {
      "name": "SDE Race",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "Resource"
    } ],
    "dataRequirement": [ {
      "type": "Patient",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" ],
      "mustSupport": [ "gender", "gender.value", "url", "extension" ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.45"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.56"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.120.12.1003"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.1940"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code", "clinicalStatus", "verificationStatus" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.39"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "performed", "status", "status.value", "id", "id.value" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://snomed.info/sct",
          "code": "254292007",
          "display": "Tumor staging (tumor staging)"
        } ]
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "performed", "status", "status.value", "id", "id.value" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.55"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "performed", "status", "status.value", "id", "id.value" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://snomed.info/sct",
          "code": "169331000",
          "display": "Combined radiotherapy (procedure)"
        } ]
      } ]
    }, {
      "type": "MedicationAdministration",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration" ],
      "mustSupport": [ "medication", "effective", "status", "status.value" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.52"
      } ]
    }, {
      "type": "MedicationAdministration",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-mednotadministered" ],
      "mustSupport": [ "medication", "extension", "statusReason" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.52"
      } ]
    }, {
      "type": "MedicationAdministration",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-mednotadministered" ],
      "mustSupport": [ "medication", "extension", "statusReason" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.52"
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation" ],
      "mustSupport": [ "code", "value", "status", "status.value", "reference", "reference.value" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://loinc.org",
          "code": "21902-2",
          "display": "Stage group.pathology Cancer"
        } ]
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "period", "class", "status", "status.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"
      } ]
    }, {
      "type": "Coverage",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage" ],
      "mustSupport": [ "type", "period" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"
      } ]
    }, {
      "type": "MedicationRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
      "mustSupport": [ "medication", "dosageInstruction", "dispenseRequest", "dispenseRequest.expectedSupplyDuration", "dispenseRequest.quantity", "dispenseRequest.numberOfRepeatsAllowed", "dispenseRequest.numberOfRepeatsAllowed.value", "authoredOn", "authoredOn.value", "dispenseRequest.validityPeriod", "status", "status.value", "intent", "intent.value", "doNotPerform", "doNotPerform.value" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.32"
      } ]
    }, {
      "type": "MedicationRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
      "mustSupport": [ "medication", "dosageInstruction", "dispenseRequest", "dispenseRequest.expectedSupplyDuration", "dispenseRequest.quantity", "dispenseRequest.numberOfRepeatsAllowed", "dispenseRequest.numberOfRepeatsAllowed.value", "authoredOn", "authoredOn.value", "dispenseRequest.validityPeriod", "status", "status.value", "intent", "intent.value", "doNotPerform", "doNotPerform.value" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1151.60"
      } ]
    }, {
      "type": "MedicationRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
      "mustSupport": [ "medication.reference", "dosageInstruction", "dispenseRequest", "dispenseRequest.expectedSupplyDuration", "dispenseRequest.quantity", "dispenseRequest.numberOfRepeatsAllowed", "dispenseRequest.numberOfRepeatsAllowed.value", "authoredOn", "authoredOn.value", "dispenseRequest.validityPeriod", "status", "status.value", "intent", "intent.value", "doNotPerform", "doNotPerform.value" ]
    }, {
      "type": "Medication",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
      "mustSupport": [ "id" ]
    } ]
  } ],
  "extension": [ {
    "id": "supplementalDataGuidance",
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-supplementalDataGuidance",
    "extension": [ {
      "url": "guidance"
    }, {
      "url": "usage",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-data-usage",
          "code": "supplemental-data",
          "display": "Supplemental Data"
        } ],
        "text": "Supplemental Data Guidance"
      }
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-effectiveDataRequirements",
    "valueReference": {
      "reference": "#effective-data-requirements"
    }
  } ],
  "url": "https://madie.cms.gov/Measure/IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR",
  "identifier": [ {
    "use": "usual",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "short-name"
      } ]
    },
    "system": "https://madie.cms.gov/measure/shortName",
    "value": "CMS646FHIR"
  }, {
    "use": "official",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "version-independent"
      } ]
    },
    "system": "urn:ietf:rfc:3986",
    "value": "urn:uuid:907ead5a-2f8f-468e-b774-309ea8aa6182"
  }, {
    "use": "official",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "version-specific"
      } ]
    },
    "system": "urn:ietf:rfc:3986",
    "value": "urn:uuid:e4939e71-7666-41d3-9a09-bb31ccab556f"
  }, {
    "use": "official",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "publisher"
      } ]
    },
    "system": "https://madie.cms.gov/measure/cmsId",
    "value": "646FHIR",
    "assigner": {
      "display": "CMS"
    }
  } ],
  "version": "1.3.000",
  "name": "IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR",
  "title": "Intravesical Bacillus-Calmette-Guerin for non-muscle invasive bladder cancerFHIR",
  "status": "draft",
  "experimental": false,
  "date": "2023-11-03T03:47:17+00:00",
  "publisher": "Oregon Urology",
  "contact": [ {
    "telecom": [ {
      "system": "url",
      "value": "www.oregonurology.com"
    } ]
  } ],
  "description": "Percentage of patients initially diagnosed with non-muscle invasive bladder cancer and who received intravesical Bacillus-Calmette-Guerin (BCG) within 6 months of bladder cancer staging",
  "purpose": "UNKNOWN",
  "usage": "Ta bladder cancer must be high grade Ta only and is supported by the 2016 AUA guidelines and 2018 NCCN guidelines.\n\nThe BCG dose can be full or partial and can be from any lot or manufacturer.\n\nTelehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth.\n\nThis eCQM is a patient-based measure.\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS646v4.\n \nPlease refer to the HL7 QI-Core Implementation Guide (http://hl7.org/fhir/us/qicore/index.html) for more information on QI-Core and mapping recommendations from QDM to QI-Core 4.1.1 (http://hl7.org/fhir/us/qicore/qdm-to-qicore.html).\"",
  "copyright": "Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Oregon Urology Institute (OUI) and Large Urology Group Practice Association (LUGPA) disclaim all liability for use or accuracy of third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.",
  "approvalDate": "2023-11-22",
  "lastReviewDate": "2023-11-22",
  "effectivePeriod": {
    "start": "2025-01-01",
    "end": "2025-12-31"
  },
  "author": [ {
    "name": "Oregon Urology",
    "telecom": [ {
      "system": "url",
      "value": "www.oregonurology.com"
    } ]
  } ],
  "library": [ "https://madie.cms.gov/Library/IntravesicalBacillusCalmetteGuerinForBladderCancerFHIR" ],
  "disclaimer": "The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by TM or [TM].",
  "rationale": "Bladder cancer is ranked 10th for new cancer cases in 2020 and is the 9th leading cause of cancer death in the United States. There are 81,400 estimated new cases in 2020 and 17,980 estimated deaths in 2020. In 2016, there were an estimated 699,450 people living with bladder cancer in the United States. Early detection (discovery of cancer in situ or localized to the primary site) is found in 85% of the patients, and with these there is a five-year survival rate of 95.8% for In Situ and 69.2% for Localized. Bladder cancer is rarely found in patients under age 20, with the median age of diagnosis being 73 (NIH, 2020).\nNational Comprehensive Cancer Network (NCCN) Guidelines for Bladder Cancer (version 6.2021) defines intravesical BCG as Category 1 Treatment for Ta - high grade, T1 and Tis non-muscle invasive bladder cancer. Most public data reflects prophylactic or adjuvant use of intravesical therapy with the goal of preventing recurrence or delaying progression to a higher grade or stage. BCG has been shown to be effective as prophylaxis to prevent bladder cancer recurrences following TURBT. The NCCN Bladder Cancer Panel Members recommend BCG as the preferred option over Mitomycin C for adjuvant treatment of high-grade lesions (Ta). BCG is also standard therapy for Primary Tis. Most T1 lesions are high risk and are similarly treated with adjuvant intravesical therapy with BCG being a Category 1 recommendation. (NCCN, 2021).",
  "clinicalRecommendationStatement": "Intravesical BCG should be administered within 6 months of the initial diagnosis of non-muscle invasive bladder cancer. It may be administered 3-4 weeks after resection, but there needs to be pathological tumor confirmation and must be withheld if there is traumatic catheterization, bacteriuria, persistent gross hematuria, persistent severe local symptoms or systemic symptoms. The normal induction course is 6 weekly instillations of intravesical BCG (AUA Non-Muscle Invasive Bladder Cancer and American Urological Association (AUA) Guideline for the Management of Non-muscle Invasive Bladder Cancer: Stages Ta High Risk, T1 and TIS).",
  "scoring": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
      "code": "proportion",
      "display": "Proportion"
    } ]
  },
  "group": [ {
    "id": "6500d7b2da013638e7b3db7a",
    "extension": [ {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
          "code": "proportion",
          "display": "Proportion"
        } ]
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
      "valueCode": "boolean"
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-type",
          "code": "process",
          "display": "Process"
        } ]
      }
    } ],
    "population": [ {
      "id": "4D2F5722-7FA4-4B23-8D7E-356A44FEE386",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "initial-population",
          "display": "Initial Population"
        } ]
      },
      "description": "All patients initially diagnosed with T1, Tis or high grade Ta non-muscle invasive bladder cancer and a qualified encounter in the measurement period.",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Initial Population"
      }
    }, {
      "id": "6F7048E5-A801-4B49-B7F6-DCDE40AB938D",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator",
          "display": "Denominator"
        } ]
      },
      "description": "Equals Initial Population",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator"
      }
    }, {
      "id": "3E04DEA7-8F24-4003-89A6-04E7EE62DAF4",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator-exclusion",
          "display": "Denominator Exclusion"
        } ]
      },
      "description": "Immunosuppressed patients, includes HIV and immunocompromised state.\nImmunosuppressive drug therapy.\nActive Tuberculosis.\nMixed histology urothelial cell carcinoma including micropapillary, plasmacytoid, sarcomatoid, adenocarcinoma and squamous disease.\nPatients who undergo cystectomy, chemotherapy or radiation within 6 months prior to Bladder Cancer Staging.",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator Exclusion"
      }
    }, {
      "id": "4C0E0E50-2A4D-4C3D-A9AD-12563E9F392F",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator",
          "display": "Numerator"
        } ]
      },
      "description": "Intravesical Bacillus-Calmette Guerin (BCG) instillation for initial dose or series.\nBCG is initiated within 6 months of the bladder cancer staging and during the measurement period.",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Numerator"
      }
    }, {
      "id": "81e2ba76-93c1-415c-816e-100ba5b77b6d",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator-exclusion",
          "display": "Numerator Exclusion"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier"
      }
    }, {
      "id": "77076019-B76A-4F91-A254-06B870D7A263",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator-exception",
          "display": "Denominator Exception"
        } ]
      },
      "description": "Unavailability of BCG",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator Exception"
      }
    } ]
  } ],
  "supplementalData": [ {
    "id": "sde-ethnicity",
    "usage": [ {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/measure-data-usage",
        "code": "supplemental-data"
      } ]
    } ],
    "description": "SDE Ethnicity",
    "criteria": {
      "language": "text/cql-identifier",
      "expression": "SDE Ethnicity"
    }
  }, {
    "id": "sde-payer",
    "usage": [ {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/measure-data-usage",
        "code": "supplemental-data"
      } ]
    } ],
    "description": "SDE Payer",
    "criteria": {
      "language": "text/cql-identifier",
      "expression": "SDE Payer"
    }
  }, {
    "id": "sde-race",
    "usage": [ {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/measure-data-usage",
        "code": "supplemental-data"
      } ]
    } ],
    "description": "SDE Race",
    "criteria": {
      "language": "text/cql-identifier",
      "expression": "SDE Race"
    }
  }, {
    "id": "sde-sex",
    "usage": [ {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/measure-data-usage",
        "code": "supplemental-data"
      } ]
    } ],
    "description": "SDE Sex",
    "criteria": {
      "language": "text/cql-identifier",
      "expression": "SDE Sex"
    }
  } ]
}
