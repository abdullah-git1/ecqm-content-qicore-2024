<Measure xmlns="http://hl7.org/fhir">
   <id value="CMS506FHIRSafeUseofOpioids"></id>
   <meta>
      <profile value="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm"></profile>
      <profile value="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/publishable-measure-cqfm"></profile>
      <profile value="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/executable-measure-cqfm"></profile>
   </meta>
   <text>
      <status value="extensions"></status>
      <div xmlns="http://www.w3.org/1999/xhtml" class="col-12"> 
         <table class="narrative-table"> 
            <tbody> 
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Knowledge Artifact Metadata</th> 
               </tr> 
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Measure Metadata</th> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Short Name Identifier</th> 
                  <td class="content-container">CMS506FHIR </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Version Independent Identifier</th> 
                  <td class="content-container">urn:uuid:95d529af-66b4-4cfd-bc1f-f43704dc47ad</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Version Specific Identifier</th> 
                  <td class="content-container">urn:uuid:c8f62fe1-8d6d-4e05-9574-7f89899e4ec7</td> 
               </tr>  
               <tr> 
                  <th scope="row" class="row-header">Publisher (CMS) Identifier</th> 
                  <td class="content-container">506FHIR</td> 
               </tr>  
               <tr> 
                  <th scope="row" class="row-header">Identifier</th> 
                  <td class="content-container">org.hl7.fhir.r5.model.Identifier@59eb9de2</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Version Number</th> 
                  <td class="content-container">Draft based on 0.2.001</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Rationale</th> 
                  <td class="content-container">Unintentional opioid overdose fatalities have become a major public health concern in the United States (Rudd, Aleshire, Zibbel, &amp; Gladden, 2016). Reducing the number of unintentional overdoses has become a priority for numerous federal organizations including, but not limited to, the Centers for Disease Control and Prevention (CDC), the Federal Interagency Workgroup for Opioid Adverse Drug Events, and the Substance Abuse and Mental Health Services Administration. 

Concurrent prescriptions of opioids or opioids and benzodiazepines places patients at a greater risk of unintentional overdose due to the increased risk of respiratory depression (Dowell, Haegerich, &amp; Chou, 2016; Dowell, Ragan, Jones, Baldwin, &amp; Chou, 2022). An analysis of national prescribing patterns shows that more than half of patients who received an opioid prescription in 2009 had filled another opioid prescription within the previous 30 days (National Institute on Drug Abuse, 2011). Studies of multiple claims and prescription databases have shown that between 5%-15% of patients receive concurrent opioid prescriptions and 5%-20% of patients receive concurrent opioid and benzodiazepine prescriptions across various settings (Liu et al., 2013; Mack et al., 2015, Park et al., 2015). Patients who have multiple opioid prescriptions have an increased risk for overdose (Jena et al., 2014). Rates of fatal overdose are ten times higher in patients who are co-dispensed opioid analgesics and benzodiazepines than opioids alone (Dasgupta et al., 2015). The number of opioid overdose deaths involving benzodiazepines increased 14% on average each year from 2006 to 2011, while the number of opioid analgesic overdose deaths not involving benzodiazepines did not change significantly (Jones &amp; McAninch, 2015). Furthermore, concurrent use of benzodiazepines with opioids was prevalent in 31%-51% of fatal overdoses (Dowell, Haegerich, &amp; Chou, 2016). One study found that eliminating concurrent use of opioids and benzodiazepines could reduce the risk of opioid overdose-related emergency department (ED) and inpatient visits by 15% and potentially could have prevented an estimated 2,630 deaths related to opioid painkiller overdoses in 2015 (Sun, Dixit, Humphreys, Darnall, &amp; Mackey, 2017). 

A study on The Opioid Safety Initiative in the Veterans Health Administration (VHA), which includes an opioid and benzodiazepine concurrent prescribing measure that this measure is based on, was associated with a decrease of 20.67% overall and 0.86% patients per month (781 patients per month) receiving concurrent benzodiazepine with an opioid among all adult VHA patients who filled outpatient opioid prescriptions from October 2012 to September 2014 (Lin, Bohnert, Kerns, Clay, Ganoczy, &amp; Ilgen, 2017).

Adopting a measure that calculates the proportion of patients with two or more opioids or opioids and benzodiazepines concurrently has the potential to reduce preventable mortality and reduce the costs associated with adverse events related to opioid use by (1) encouraging providers to identify patients with concurrent prescriptions of opioids or opioids and benzodiazepines and (2) discouraging providers from prescribing two or more opioids or opioids and benzodiazepines concurrently.</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Clinical Recommendation Statement</th> 
                  <td class="content-container">The CDC Clinical Practice Guideline for Prescribing Opioids for Pain — United States, 2022 recommends that clinicians should:
- “[Use strategies minimizing] opioid use…for both opioid-naïve and opioid-tolerant patients with acute pain when possible. If patients receiving long-term opioid therapy require additional medication for acute pain, nonopioid medications should be used when possible.”
- ”Use particular caution when prescribing opioid pain medication and benzodiazepines concurrently." - “Review increased risks for respiratory depression when opioids are taken with benzodiazepines, other sedatives, alcohol, nonprescribed or illicit drugs (e.g., heroin), or other opioids (see Recommendations 8 and 11)”
- “Closely monitor patients who are unable to taper and who continue on high-dose or otherwise high-risk opioid regimens (e.g., opioids prescribed concurrently with benzodiazepines) and should work with patients to mitigate overdose risk (e.g., by providing overdose education and naloxone) (see Recommendation 8).” - "Discuss information from the PDMP with the patient and confirm that the patient is aware of any additional prescriptions.”
- “Discuss safety concerns, including increased risk for respiratory depression and overdose, with patients found to be receiving overlapping prescription opioids from multiple clinicians who are not coordinating the patient’s care or patients who are receiving medications that increase risk when combined with opioids (e.g., benzodiazepines) (see Recommendation 11), and offer naloxone (see Recommendation 8)." - "Discuss safety concerns with other clinicians who are prescribing controlled substances for the patient. Ideally, clinicians should first discuss concerns with the patient and inform them that they plan to coordinate care with their other clinicians to improve the patient’s safety.”

In addition to the 2022 CDC Clinical Practice Guideline for Prescribing Opioids for Pain, opioid prescribing guidelines issued by various state agencies and professional societies for various settings agree with the recommendation to avoid concurrently prescribing opioids  (American Academy of Emergency Medicine (AAEM), 2013; and Washington Agency Medical Directors’ Group (WAMDG), 2015), and opioids and benzodiazepines (WAMDG, 2015; American Society of Interventional Pain Physicians (ASIPP), 2012;, and New York City Department Of Health and Mental Hygiene (NYC DPOMH), 2013) whenever possible as the combination of these medications may potentiate opioid-induced respiratory depression.</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Guidance</th> 
                  <td class="content-container">Clinician judgement, clinical appropriateness, or both may indicate concurrent prescribing of two unique opioids or an opioid and benzodiazepine is medically necessary, thus the measure is not expected to have a zero rate. 

Inpatient hospitalizations with discharge medications of an opioid or benzodiazepine prescription should be included in the initial population.  Inpatient hospitalizations with discharge medications of two or more opioids or an opioid and benzodiazepine resulting in concurrent therapy at discharge should be included in the numerator. Each benzodiazepine and opioid included on the medication discharge list is considered a unique prescription.

The denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.

This eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.  This FHIR-based measure has been derived from the QDM-based measure: CMS 506v8.0. Please refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU4.1.1/) for more information on QI-Core and mapping recommendations from QDM to QI-Core 4.1.1 (https://hl7.org/fhir/us/qicore/STU4.1.1/qdm-to-qicore.html).</td> 
               </tr>  
               <tr> 
                  <th scope="row" class="row-header">Supplemental Data Guidance</th> 
                  <td class="content-container">For every patient evaluated by this measure also identify payer, race, ethnicity and sex; 
SDE Ethnicity  SDE Payer 
SDE Race  SDE Sex </td> 
               </tr>  
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Measure Population Criteria (ID: 67460a2f46b6174510cfea5f)</th> 
               </tr>  
               <tr> 
                  <th scope="row" class="row-header">Summary</th> 
                  <td class="content-container">Proportion of inpatient hospitalizations for patients 18 years of age and older prescribed two or more opioids or an opioid and benzodiazepine concurrently at discharge.</td> 
               </tr>  
               <tr>  
                  <th scope="row" class="row-header">Initial Population</th> 
                  <td class="content-container"> 
                     <em>ID</em>: 345E1255-3623-402A-9016-2B5C9E096C26 
                     <br></br>  
                     <em>Description</em>: 
                     <p style="white-space: pre-line" class="tab-one">Inpatient hospitalizations that end during the measurement period, where the patient is 18 years of age and older at the start of the encounter and prescribed one opioid and/or benzodiazepine at discharge</p>   
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-initial-population">Initial Population</a>  
                  </td> 
               </tr>  
               <tr>  
                  <th scope="row" class="row-header">Denominator</th> 
                  <td class="content-container"> 
                     <em>ID</em>: 9ED4F80C-B465-4CDB-BFDD-CE376A165DD0 
                     <br></br>  
                     <em>Description</em>: 
                     <p style="white-space: pre-line" class="tab-one">Equals Initial Population</p>   
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-denominator">Denominator</a>  
                  </td> 
               </tr>  
               <tr>  
                  <th scope="row" class="row-header">Denominator Exclusion</th> 
                  <td class="content-container"> 
                     <em>ID</em>: 25C57870-241A-428F-BDA8-63C5B4685EE4 
                     <br></br>  
                     <em>Description</em>: 
                     <p style="white-space: pre-line" class="tab-one">Inpatient hospitalizations where patients have cancer pain that begins prior to or during the encounter or are ordered or are receiving palliative or hospice care (including comfort measures, terminal care, and dying care) during the hospitalization or in an emergency department encounter or observation stay immediately prior to hospitalization, patients receiving medication for opioid use disorder (OUD) with active OUD diagnosis or Opioid Medication Assisted Treatment (MAT), patients with sickle cell disease, patients discharged to another inpatient care facility or left against medical advice, and patients who expire during the inpatient stay</p>   
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-denominator-exclusion">Denominator Exclusion</a>  
                  </td> 
               </tr>  
               <tr>  
                  <th scope="row" class="row-header">Numerator</th> 
                  <td class="content-container"> 
                     <em>ID</em>: C36B952C-8CCF-436F-A9E2-423A00C56A1A 
                     <br></br>  
                     <em>Description</em>: 
                     <p style="white-space: pre-line" class="tab-one">Inpatient hospitalizations where the patient is prescribed two or more opioids or an opioid and benzodiazepine at discharge</p>   
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-numerator">Numerator</a>  
                  </td> 
               </tr>   
               <tr> 
                  <th scope="row" class="row-header">Population Basis</th> 
                  <td class="content-container">Encounter</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Scoring</th> 
                  <td class="content-container">[http://terminology.hl7.org/CodeSystem/measure-scoring#proportion: 'Proportion']</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Type</th> 
                  <td class="content-container">[http://terminology.hl7.org/CodeSystem/measure-type#process: 'Process']</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Rate Aggregation</th> 
                  <td class="content-container">None</td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Improvement Notation</th> 
                  <td class="content-container">[http://terminology.hl7.org/CodeSystem/measure-improvement-notation#decrease: 'Decreased score indicates improvement']</td> 
               </tr> 
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Supplemental Data Elements</th> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Supplemental Data Element</th> 
                  <td class="content-container"> 
                     <em>ID</em>: sde-ethnicity  
                     <br></br>   
                     <em>Usage Code</em>: [http://terminology.hl7.org/CodeSystem/measure-data-usage#supplemental-data]  
                     <br></br>  
                     <em>Description</em>: SDE Ethnicity   
                     <br></br> 
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-sde-ethnicity">SDE Ethnicity</a>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Supplemental Data Element</th> 
                  <td class="content-container"> 
                     <em>ID</em>: sde-payer  
                     <br></br>   
                     <em>Usage Code</em>: [http://terminology.hl7.org/CodeSystem/measure-data-usage#supplemental-data]  
                     <br></br>  
                     <em>Description</em>: SDE Payer   
                     <br></br> 
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-sde-payer">SDE Payer</a>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Supplemental Data Element</th> 
                  <td class="content-container"> 
                     <em>ID</em>: sde-race  
                     <br></br>   
                     <em>Usage Code</em>: [http://terminology.hl7.org/CodeSystem/measure-data-usage#supplemental-data]  
                     <br></br>  
                     <em>Description</em>: SDE Race   
                     <br></br> 
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-sde-race">SDE Race</a>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Supplemental Data Element</th> 
                  <td class="content-container"> 
                     <em>ID</em>: sde-sex  
                     <br></br>   
                     <em>Usage Code</em>: [http://terminology.hl7.org/CodeSystem/measure-data-usage#supplemental-data]  
                     <br></br>  
                     <em>Description</em>: SDE Sex   
                     <br></br> 
                     <em>Logic Definition</em>: 
                     <a href="#cms506fhirsafeuseofopioids-sde-sex">SDE Sex</a>  
                  </td> 
               </tr> 
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Measure Logic</th> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Primary Library</th> 
                  <td class="content-container">https://madie.cms.gov/Library/CMS506FHIRSafeUseofOpioids</td> 
               </tr>  
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Library SDE  
                     <br></br>    
                     <em>Resource</em>: https://madie.cms.gov/Library/SupplementalDataElements|3.5.000 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>https://madie.cms.gov/Library/SupplementalDataElements|3.5.000</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Library CQMCommon  
                     <br></br>    
                     <em>Resource</em>: https://madie.cms.gov/Library/CQMCommon|2.2.000 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>https://madie.cms.gov/Library/CQMCommon|2.2.000</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Library FHIRHelpers  
                     <br></br>    
                     <em>Resource</em>: https://madie.cms.gov/Library/FHIRHelpers|4.4.000 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>https://madie.cms.gov/Library/FHIRHelpers|4.4.000</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Library QICoreCommon  
                     <br></br>    
                     <em>Resource</em>: https://madie.cms.gov/Library/QICoreCommon|2.1.000 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>https://madie.cms.gov/Library/QICoreCommon|2.1.000</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Code system AdministrativeGender  
                     <br></br>    
                     <em>Resource</em>: http://hl7.org/fhir/administrative-gender 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://hl7.org/fhir/administrative-gender</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Code system MedicationRequestCategory  
                     <br></br>    
                     <em>Resource</em>: http://terminology.hl7.org/CodeSystem/medicationrequest-category 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://terminology.hl7.org/CodeSystem/medicationrequest-category</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Code system ConditionCategory  
                     <br></br>    
                     <em>Resource</em>: http://terminology.hl7.org/CodeSystem/condition-category 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://terminology.hl7.org/CodeSystem/condition-category</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Code system USCoreConditionCategoryExtensionCodes  
                     <br></br>    
                     <em>Resource</em>: http://hl7.org/fhir/us/core/CodeSystem/condition-category 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://hl7.org/fhir/us/core/CodeSystem/condition-category</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Encounter Inpatient  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Schedule II, III and IV Opioid Medications  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Schedule IV Benzodiazepines  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Payer Type  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Cancer Related Pain  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Sickle Cell Disease with and without Crisis  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Medications for Opioid Use Disorder (MOUD)  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Opioid Medication Assisted Treatment (MAT)  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Opioid Use Disorder  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Palliative or Hospice Care  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Observation Services  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Emergency Department Visit  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Discharge To Acute Care Facility  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Hospice Care Referral or Admission  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Patient Expired  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309</tt> 
                  </td> 
               </tr> 
               <tr>   
                  <th scope="row" class="row-header">Dependency</th> 
                  <td class="content-container"> 
                     <em>Description</em>: Value set Left Against Medical Advice  
                     <br></br>    
                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.308 
                     <br></br> 
                     <em>Canonical URL</em>: 
                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.308</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Direct Reference Code</th> 
                  <td class="content-container"> 
                     <em>Display</em>: Male 
                     <br></br> 
                     <em>Code</em>: M 
                     <br></br> 
                     <em>System</em>: 
                     <tt>http://hl7.org/fhir/administrative-gender</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Direct Reference Code</th> 
                  <td class="content-container"> 
                     <em>Display</em>: Female 
                     <br></br> 
                     <em>Code</em>: F 
                     <br></br> 
                     <em>System</em>: 
                     <tt>http://hl7.org/fhir/administrative-gender</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Direct Reference Code</th> 
                  <td class="content-container"> 
                     <em>Display</em>: Community 
                     <br></br> 
                     <em>Code</em>: community 
                     <br></br> 
                     <em>System</em>: 
                     <tt>http://terminology.hl7.org/CodeSystem/medicationrequest-category</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Direct Reference Code</th> 
                  <td class="content-container"> 
                     <em>Display</em>: Discharge 
                     <br></br> 
                     <em>Code</em>: discharge 
                     <br></br> 
                     <em>System</em>: 
                     <tt>http://terminology.hl7.org/CodeSystem/medicationrequest-category</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Direct Reference Code</th> 
                  <td class="content-container"> 
                     <em>Display</em>: Problem List Item 
                     <br></br> 
                     <em>Code</em>: problem-list-item 
                     <br></br> 
                     <em>System</em>: 
                     <tt>http://terminology.hl7.org/CodeSystem/condition-category</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Direct Reference Code</th> 
                  <td class="content-container"> 
                     <em>Display</em>: Health Concern 
                     <br></br> 
                     <em>Code</em>: health-concern 
                     <br></br> 
                     <em>System</em>: 
                     <tt>http://hl7.org/fhir/us/core/CodeSystem/condition-category</tt> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: Measurement Period 
                     <br></br> 
                     <em>Use</em>: in 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: 1 
                     <br></br> 
                     <em>Type</em>: Period 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: Numerator 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: * 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: Denominator 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: * 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: Initial Population 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: * 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: Denominator Exclusion 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: * 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: SDE Sex 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: 1 
                     <br></br> 
                     <em>Type</em>: Coding 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: SDE Payer 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: * 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: SDE Ethnicity 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: 1 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Parameter</th> 
                  <td class="content-container"> 
                     <em>Name</em>: SDE Race 
                     <br></br> 
                     <em>Use</em>: out 
                     <br></br> 
                     <em>Min Cardinality</em>: 0 
                     <br></br> 
                     <em>Max Cardinality</em>: 1 
                     <br></br> 
                     <em>Type</em>: Resource 
                  </td> 
               </tr>  
               <tr> 
                  <th colspan="2" scope="row" class="section-header">
                     <a name="effective-data-requirements"> </a>Measure Logic Data Requirements
                  </th> 
               </tr>  
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Patient 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient 
                     <br></br>   
                     <em>Must Support Elements</em>: gender, gender.value, url, extension 
                     <br></br>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Encounter 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter 
                     <br></br>   
                     <em>Must Support Elements</em>: type, status, status.value, period, condition, condition.reference, condition.reference.value, hospitalization, hospitalization.dischargeDisposition 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: type
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Encounter 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter 
                     <br></br>   
                     <em>Must Support Elements</em>: type, status, status.value, period, condition, condition.reference, condition.reference.value, hospitalization, hospitalization.dischargeDisposition 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: type
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Encounter 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter 
                     <br></br>   
                     <em>Must Support Elements</em>: type, status, status.value, period, condition, condition.reference, condition.reference.value, hospitalization, hospitalization.dischargeDisposition 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: type
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: MedicationRequest 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest 
                     <br></br>   
                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, authoredOn, authoredOn.value 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: medication
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: MedicationRequest 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest 
                     <br></br>   
                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, authoredOn, authoredOn.value 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: medication
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: MedicationRequest 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest 
                     <br></br>   
                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, authoredOn, authoredOn.value 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: medication
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: MedicationRequest 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest 
                     <br></br>   
                     <em>Must Support Elements</em>: medication.reference, status, status.value, intent, intent.value, authoredOn, authoredOn.value, medication 
                     <br></br>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Medication 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication 
                     <br></br>   
                     <em>Must Support Elements</em>: id 
                     <br></br>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Coverage 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage 
                     <br></br>   
                     <em>Must Support Elements</em>: type, period 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: type
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Condition 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition 
                     <br></br>   
                     <em>Must Support Elements</em>: id, id.value, code 
                     <br></br>  
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Condition 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition 
                     <br></br>   
                     <em>Must Support Elements</em>: code 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: code
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Condition 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition 
                     <br></br>   
                     <em>Must Support Elements</em>: code 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: code
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Condition 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition 
                     <br></br>   
                     <em>Must Support Elements</em>: code 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: code
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Procedure 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure 
                     <br></br>   
                     <em>Must Support Elements</em>: code, performed 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: code
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: Procedure 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure 
                     <br></br>   
                     <em>Must Support Elements</em>: code 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: code
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" class="row-header">Data Requirement</th> 
                  <td class="content-container"> 
                     <em>Type</em>: ServiceRequest 
                     <br></br> 
                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest 
                     <br></br>   
                     <em>Must Support Elements</em>: code 
                     <br></br>  
                     <em>Code Filter(s)</em>: 
                     <br></br>  
                     <span class="tab-one">
                        <em>Path</em>: code
                     </span> 
                     <br></br>  
                     <span class="tab-one">
                        <em>ValueSet</em>:
                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579 
                     <br></br>   
                  </td> 
               </tr> 
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Measure Logic Definitions</th> 
               </tr>  
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="supplementaldataelements-sde-sex"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> SupplementalDataElements
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Sex":
  case
    when Patient.gender = 'male' then "M"
    when Patient.gender = 'female' then "F"
    else null
  end</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-sde-sex"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Sex":
  SDE."SDE Sex"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cqmcommon-inpatient-encounter"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CQMCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Inpatient Encounter":
  [Encounter: "Encounter Inpatient"] EncounterInpatient
		where EncounterInpatient.status = 'finished'
		and EncounterInpatient.period ends during day of "Measurement Period"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-inpatient-encounter-with-age-greater-than-or-equal-to-18"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Inpatient Encounter with Age Greater than or Equal to 18":
  CQMCommon."Inpatient Encounter" InpatientHospitalEncounter
    where AgeInYearsAt(date from start of InpatientHospitalEncounter.period) &gt;= 18</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-opioid-at-discharge"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Opioid at Discharge":
  ( ["MedicationRequest": "Schedule II, III and IV Opioid Medications"] OpioidMedications
    where ( OpioidMedications.isCommunity ( )
        or OpioidMedications.isDischarge ( )
    ) ) OpioidDischargeMedication
    where OpioidDischargeMedication.status in { 'active', 'completed' }
      and OpioidDischargeMedication.intent = 'order'</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-benzodiazepine-at-discharge"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Benzodiazepine at Discharge":
  ( ["MedicationRequest": medication in "Schedule IV Benzodiazepines"] BenzoMedications
    where ( BenzoMedications.isCommunity ( )
        or BenzoMedications.isDischarge ( )
    ) ) BenzodiazepineDischargeMedication
    where BenzodiazepineDischargeMedication.status in { 'active', 'completed' }
      and BenzodiazepineDischargeMedication.intent = 'order'</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-inpatient-encounters-with-an-opioid-or-benzodiazepine-at-discharge"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Inpatient Encounters with an Opioid or Benzodiazepine at Discharge":
/*Captures encounters of patients with an opioid and/or benzodiazepine at discharge*/
  
  "Inpatient Encounter with Age Greater than or Equal to 18" InpatientEncounter
    with ( "Opioid at Discharge"
      union "Benzodiazepine at Discharge" ) OpioidOrBenzodiazepineAtDischarge
      such that OpioidOrBenzodiazepineAtDischarge.authoredOn during day of InpatientEncounter.period</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-numerator"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Numerator":
  /*Encounters of patients prescribed two or more opioids or an opioid and benzodiazepine at discharge.*/
  
  ( ( "Inpatient Encounters with an Opioid or Benzodiazepine at Discharge" InpatientEncounter
        where ( Count("Opioid at Discharge" OpioidMedications
              where OpioidMedications.authoredOn during day of InpatientEncounter.period
              return distinct OpioidMedications.medication
          ) &gt;= 2
        )
          or exists ( "Opioid at Discharge" OpioidDischargeMedications
              where OpioidDischargeMedications.authoredOn during day of InpatientEncounter.period
                and exists "Benzodiazepine at Discharge" BenzodiazepineDischargeMedication
                  where BenzodiazepineDischargeMedication.authoredOn during day of InpatientEncounter.period
          )
    )
  )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-initial-population"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Initial Population":
  "Inpatient Encounters with an Opioid or Benzodiazepine at Discharge"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-denominator"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Denominator":
  "Initial Population"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="supplementaldataelements-sde-payer"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> SupplementalDataElements
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Payer":
  [Coverage: type in "Payer Type"] Payer
    return {
      code: Payer.type,
      period: Payer.period
    }</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-sde-payer"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Payer":
  SDE."SDE Payer"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="supplementaldataelements-sde-ethnicity"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> SupplementalDataElements
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Ethnicity":
  Patient.ethnicity E
    return Tuple {
      codes: { E.ombCategory } union E.detailed,
      display: E.text
    }</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-sde-ethnicity"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Ethnicity":
  SDE."SDE Ethnicity"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-treatment-for-opioid-use-disorders"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Treatment for Opioid Use Disorders":
  ( ["MedicationRequest": "Medications for Opioid Use Disorder (MOUD)"] MedicationTreatment
      with ["Procedure": "Opioid Medication Assisted Treatment (MAT)"] MAT
        such that MedicationTreatment.authoredOn during day of MAT.performed.toInterval ( )
          and MedicationTreatment.authoredOn during day of "Measurement Period"
  )
    union ( ["MedicationRequest": "Medications for Opioid Use Disorder (MOUD)"] MedicationTreatment
        with ["Condition": "Opioid Use Disorder"] OUD
          such that MedicationTreatment.authoredOn during day of OUD.prevalenceInterval ( )
            and OUD.prevalenceInterval ( ) overlaps day of "Measurement Period"
    )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-intervention-palliative-or-hospice-care"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Intervention Palliative or Hospice Care":
  ["ServiceRequest": "Palliative or Hospice Care"]
    union ["Procedure": "Palliative or Hospice Care"]</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-denominator-exclusion"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "Denominator Exclusion":
  /*Excludes encounters of patients with cancer pain or who are receiving palliative or hospice care at the time of the encounter or who receive treatment for opioid use disorder, have sickle cell disease, or who are discharged to another inpatient care facility or discharged against medical advice, or expire during the inpatient stay*/
  
  ( "Inpatient Encounters with an Opioid or Benzodiazepine at Discharge" InpatientEncounter
      where exists ( ["Condition": "Cancer Related Pain"] CancerPain
          where ( CancerPain.isProblemListItem ( )
              or CancerPain.isHealthConcern ( )
          )
            and CancerPain.prevalenceInterval ( ) overlaps day of InpatientEncounter.period
      )
        or exists ( ( InpatientEncounter.encounterDiagnosis ( ) ) InpatientEncounterDiagnosis
            where InpatientEncounterDiagnosis.code in "Cancer Related Pain"
        )
        or exists ( ["Condition": "Sickle Cell Disease with and without Crisis"] SickleCellDisease
            where SickleCellDisease.prevalenceInterval ( ) overlaps day of InpatientEncounter.period
        )
        or exists ( "Treatment for Opioid Use Disorders" OUDTreatment
            where OUDTreatment.authoredOn during day of InpatientEncounter.period
        )
        or exists ( "Intervention Palliative or Hospice Care" PalliativeOrHospiceCare
            where Coalesce(start of PalliativeOrHospiceCare.performed.toInterval(), PalliativeOrHospiceCare.authoredOn) during day of InpatientEncounter."hospitalizationWithObservation" ( )
        )
        or ( InpatientEncounter.hospitalization.dischargeDisposition in "Discharge To Acute Care Facility"
            or InpatientEncounter.hospitalization.dischargeDisposition in "Hospice Care Referral or Admission"
            or InpatientEncounter.hospitalization.dischargeDisposition in "Patient Expired"
            or InpatientEncounter.hospitalization.dischargeDisposition in "Left Against Medical Advice"
        )
  )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="supplementaldataelements-sde-race"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> SupplementalDataElements
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Race":
  Patient.race R
    return Tuple {
      codes: R.ombCategory union R.detailed,
      display: R.text
    }</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cms506fhirsafeuseofopioids-sde-race"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CMS506FHIRSafeUseofOpioids
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define "SDE Race":
  SDE."SDE Race"</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="qicorecommon-iscommunity"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> QICoreCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns true if the given MedicationRequest has a category of Community
*/
define fluent function isCommunity(medicationRequest MedicationRequest):
  exists (medicationRequest.category C
    where C ~ Community
  )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="fhirhelpers-toconcept"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> FHIRHelpers
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.
*/
define function ToConcept(concept FHIR.CodeableConcept):
    if concept is null then
        null
    else
        System.Concept {
            codes: concept.coding C return ToCode(C),
            display: concept.text.value
        }</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="qicorecommon-isdischarge"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> QICoreCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns true if the given MedicationRequest has a category of Discharge
*/
define fluent function isDischarge(medicationRequest MedicationRequest):
  exists (medicationRequest.category C
    where C ~ Discharge
  )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="fhirhelpers-tostring"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> FHIRHelpers
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">define function ToString(value uri): value.value</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="fhirhelpers-tocode"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> FHIRHelpers
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.
*/
define function ToCode(coding FHIR.Coding):
    if coding is null then
        null
    else
        System.Code {
          code: coding.code.value,
          system: coding.system.value,
          version: coding.version.value,
          display: coding.display.value
        }</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="qicorecommon-isproblemlistitem"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> QICoreCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns true if the given condition is a problem list item.
*/
define fluent function isProblemListItem(condition Condition):
  exists (condition.category C
    where C ~ "problem-list-item"
  )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="qicorecommon-ishealthconcern"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> QICoreCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns true if the given condition is a health concern
*/
define fluent function isHealthConcern(condition Condition):
  exists (condition.category C
    where C ~ "health-concern"
  )</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="qicorecommon-prevalenceinterval"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> QICoreCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns an interval representing the normalized prevalence period of a given Condition.
@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from
onset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting 
interval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.
*/
define fluent function prevalenceInterval(condition Condition):
if condition.clinicalStatus ~ "active"
  or condition.clinicalStatus ~ "recurrence"
  or condition.clinicalStatus ~ "relapse" then
  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]
else
    (end of condition.abatementInterval()) abatementDate
    return if abatementDate is null then
      Interval[start of condition.onset.toInterval(), abatementDate)
    else
      Interval[start of condition.onset.toInterval(), abatementDate]</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cqmcommon-encounterdiagnosis"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CQMCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns the Condition resources referenced by the diagnosis element of the Encounter
*/
define fluent function encounterDiagnosis(Encounter Encounter ):
  Encounter.diagnosis D
    return singleton from ([Condition] C where C.id = D.condition.reference.getId())</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="qicorecommon-getid"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> QICoreCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Returns the tail of the given uri (i.e. everything after the last slash in the URI).
@comment: This function can be used to determine the logical id of a given resource. It can be used in
a single-server environment to trace references. However, this function does not attempt to resolve
or distinguish the base of the given url, and so cannot be used safely in multi-server environments.
*/
define fluent function getId(uri String):
  Last(Split(uri, '/'))</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th scope="row" rowspan="2" class="row-header">  
                     <a name="cqmcommon-hospitalizationwithobservation"> </a> Logic Definition 
                  </th> 
                  <td class="content-container">
                     <em>Library Name:</em> CQMCommon
                  </td> 
               </tr> 
               <tr> 
                  <td> 
                     <pre style="border: none;" class="content-container highlight language-cql"><code class="language-cql">/*
@description: Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter
*/
define fluent function hospitalizationWithObservation(TheEncounter Encounter ):
  TheEncounter Visit
  		let ObsVisit: Last([Encounter: "Observation Services"] LastObs
  				where LastObs.status = 'finished'
            and LastObs.period ends 1 hour or less on or before start of Visit.period
  				sort by end of period
  			),
  			VisitStart: Coalesce(start of ObsVisit.period, start of Visit.period),
  			EDVisit: Last([Encounter: "Emergency Department Visit"] LastED
  				where LastED.status = 'finished'
            and LastED.period ends 1 hour or less on or before VisitStart
  				sort by end of period
  			)
  		return Interval[Coalesce(start of EDVisit.period, VisitStart), end of Visit.period]</code></pre> 
                  </td> 
               </tr> 
               <tr> 
                  <th colspan="2" scope="row" class="row-header">Generated using version 0.4.6 of the sample-content-ig Liquid templates</th> 
               </tr> 
            </tbody> 
         </table> 
      </div>
   </text>
   <contained>
      <Library xmlns="http://hl7.org/fhir">
         <id value="effective-data-requirements"></id>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode">
            <valueCoding>
               <system value="http://hl7.org/fhir/administrative-gender"></system>
               <code value="M"></code>
               <display value="Male"></display>
            </valueCoding>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode">
            <valueCoding>
               <system value="http://hl7.org/fhir/administrative-gender"></system>
               <code value="F"></code>
               <display value="Female"></display>
            </valueCoding>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode">
            <valueCoding>
               <system value="http://terminology.hl7.org/CodeSystem/medicationrequest-category"></system>
               <code value="community"></code>
               <display value="Community"></display>
            </valueCoding>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode">
            <valueCoding>
               <system value="http://terminology.hl7.org/CodeSystem/medicationrequest-category"></system>
               <code value="discharge"></code>
               <display value="Discharge"></display>
            </valueCoding>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode">
            <valueCoding>
               <system value="http://terminology.hl7.org/CodeSystem/condition-category"></system>
               <code value="problem-list-item"></code>
               <display value="Problem List Item"></display>
            </valueCoding>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode">
            <valueCoding>
               <system value="http://hl7.org/fhir/us/core/CodeSystem/condition-category"></system>
               <code value="health-concern"></code>
               <display value="Health Concern"></display>
            </valueCoding>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="SupplementalDataElements"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Sex"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Sex&amp;quot;:
  case
    when Patient.gender = &amp;#39;male&amp;#39; then &amp;quot;M&amp;quot;
    when Patient.gender = &amp;#39;female&amp;#39; then &amp;quot;F&amp;quot;
    else null
  end"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="0"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Sex"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Sex&amp;quot;:
  SDE.&amp;quot;SDE Sex&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="1"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CQMCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Inpatient Encounter"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Inpatient Encounter&amp;quot;:
  [Encounter: &amp;quot;Encounter Inpatient&amp;quot;] EncounterInpatient
		where EncounterInpatient.status = &amp;#39;finished&amp;#39;
		and EncounterInpatient.period ends during day of &amp;quot;Measurement Period&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="2"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Inpatient Encounter with Age Greater than or Equal to 18"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Inpatient Encounter with Age Greater than or Equal to 18&amp;quot;:
  CQMCommon.&amp;quot;Inpatient Encounter&amp;quot; InpatientHospitalEncounter
    where AgeInYearsAt(date from start of InpatientHospitalEncounter.period) &amp;gt;= 18"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="3"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Opioid at Discharge"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Opioid at Discharge&amp;quot;:
  ( [&amp;quot;MedicationRequest&amp;quot;: &amp;quot;Schedule II, III and IV Opioid Medications&amp;quot;] OpioidMedications
    where ( OpioidMedications.isCommunity ( )
        or OpioidMedications.isDischarge ( )
    ) ) OpioidDischargeMedication
    where OpioidDischargeMedication.status in { &amp;#39;active&amp;#39;, &amp;#39;completed&amp;#39; }
      and OpioidDischargeMedication.intent = &amp;#39;order&amp;#39;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="4"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Benzodiazepine at Discharge"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Benzodiazepine at Discharge&amp;quot;:
  ( [&amp;quot;MedicationRequest&amp;quot;: medication in &amp;quot;Schedule IV Benzodiazepines&amp;quot;] BenzoMedications
    where ( BenzoMedications.isCommunity ( )
        or BenzoMedications.isDischarge ( )
    ) ) BenzodiazepineDischargeMedication
    where BenzodiazepineDischargeMedication.status in { &amp;#39;active&amp;#39;, &amp;#39;completed&amp;#39; }
      and BenzodiazepineDischargeMedication.intent = &amp;#39;order&amp;#39;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="5"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Inpatient Encounters with an Opioid or Benzodiazepine at Discharge"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&amp;quot;:
/*Captures encounters of patients with an opioid and/or benzodiazepine at discharge*/
  
  &amp;quot;Inpatient Encounter with Age Greater than or Equal to 18&amp;quot; InpatientEncounter
    with ( &amp;quot;Opioid at Discharge&amp;quot;
      union &amp;quot;Benzodiazepine at Discharge&amp;quot; ) OpioidOrBenzodiazepineAtDischarge
      such that OpioidOrBenzodiazepineAtDischarge.authoredOn during day of InpatientEncounter.period"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="6"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Numerator"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Numerator&amp;quot;:
  /*Encounters of patients prescribed two or more opioids or an opioid and benzodiazepine at discharge.*/
  
  ( ( &amp;quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&amp;quot; InpatientEncounter
        where ( Count(&amp;quot;Opioid at Discharge&amp;quot; OpioidMedications
              where OpioidMedications.authoredOn during day of InpatientEncounter.period
              return distinct OpioidMedications.medication
          ) &amp;gt;= 2
        )
          or exists ( &amp;quot;Opioid at Discharge&amp;quot; OpioidDischargeMedications
              where OpioidDischargeMedications.authoredOn during day of InpatientEncounter.period
                and exists &amp;quot;Benzodiazepine at Discharge&amp;quot; BenzodiazepineDischargeMedication
                  where BenzodiazepineDischargeMedication.authoredOn during day of InpatientEncounter.period
          )
    )
  )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="7"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Initial Population"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Initial Population&amp;quot;:
  &amp;quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="8"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Denominator"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Denominator&amp;quot;:
  &amp;quot;Initial Population&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="9"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="SupplementalDataElements"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Payer"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Payer&amp;quot;:
  [Coverage: type in &amp;quot;Payer Type&amp;quot;] Payer
    return {
      code: Payer.type,
      period: Payer.period
    }"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="10"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Payer"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Payer&amp;quot;:
  SDE.&amp;quot;SDE Payer&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="11"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="SupplementalDataElements"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Ethnicity"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Ethnicity&amp;quot;:
  Patient.ethnicity E
    return Tuple {
      codes: { E.ombCategory } union E.detailed,
      display: E.text
    }"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="12"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Ethnicity"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Ethnicity&amp;quot;:
  SDE.&amp;quot;SDE Ethnicity&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="13"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Treatment for Opioid Use Disorders"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Treatment for Opioid Use Disorders&amp;quot;:
  ( [&amp;quot;MedicationRequest&amp;quot;: &amp;quot;Medications for Opioid Use Disorder (MOUD)&amp;quot;] MedicationTreatment
      with [&amp;quot;Procedure&amp;quot;: &amp;quot;Opioid Medication Assisted Treatment (MAT)&amp;quot;] MAT
        such that MedicationTreatment.authoredOn during day of MAT.performed.toInterval ( )
          and MedicationTreatment.authoredOn during day of &amp;quot;Measurement Period&amp;quot;
  )
    union ( [&amp;quot;MedicationRequest&amp;quot;: &amp;quot;Medications for Opioid Use Disorder (MOUD)&amp;quot;] MedicationTreatment
        with [&amp;quot;Condition&amp;quot;: &amp;quot;Opioid Use Disorder&amp;quot;] OUD
          such that MedicationTreatment.authoredOn during day of OUD.prevalenceInterval ( )
            and OUD.prevalenceInterval ( ) overlaps day of &amp;quot;Measurement Period&amp;quot;
    )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="14"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Intervention Palliative or Hospice Care"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Intervention Palliative or Hospice Care&amp;quot;:
  [&amp;quot;ServiceRequest&amp;quot;: &amp;quot;Palliative or Hospice Care&amp;quot;]
    union [&amp;quot;Procedure&amp;quot;: &amp;quot;Palliative or Hospice Care&amp;quot;]"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="15"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="Denominator Exclusion"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;Denominator Exclusion&amp;quot;:
  /*Excludes encounters of patients with cancer pain or who are receiving palliative or hospice care at the time of the encounter or who receive treatment for opioid use disorder, have sickle cell disease, or who are discharged to another inpatient care facility or discharged against medical advice, or expire during the inpatient stay*/
  
  ( &amp;quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&amp;quot; InpatientEncounter
      where exists ( [&amp;quot;Condition&amp;quot;: &amp;quot;Cancer Related Pain&amp;quot;] CancerPain
          where ( CancerPain.isProblemListItem ( )
              or CancerPain.isHealthConcern ( )
          )
            and CancerPain.prevalenceInterval ( ) overlaps day of InpatientEncounter.period
      )
        or exists ( ( InpatientEncounter.encounterDiagnosis ( ) ) InpatientEncounterDiagnosis
            where InpatientEncounterDiagnosis.code in &amp;quot;Cancer Related Pain&amp;quot;
        )
        or exists ( [&amp;quot;Condition&amp;quot;: &amp;quot;Sickle Cell Disease with and without Crisis&amp;quot;] SickleCellDisease
            where SickleCellDisease.prevalenceInterval ( ) overlaps day of InpatientEncounter.period
        )
        or exists ( &amp;quot;Treatment for Opioid Use Disorders&amp;quot; OUDTreatment
            where OUDTreatment.authoredOn during day of InpatientEncounter.period
        )
        or exists ( &amp;quot;Intervention Palliative or Hospice Care&amp;quot; PalliativeOrHospiceCare
            where Coalesce(start of PalliativeOrHospiceCare.performed.toInterval(), PalliativeOrHospiceCare.authoredOn) during day of InpatientEncounter.&amp;quot;hospitalizationWithObservation&amp;quot; ( )
        )
        or ( InpatientEncounter.hospitalization.dischargeDisposition in &amp;quot;Discharge To Acute Care Facility&amp;quot;
            or InpatientEncounter.hospitalization.dischargeDisposition in &amp;quot;Hospice Care Referral or Admission&amp;quot;
            or InpatientEncounter.hospitalization.dischargeDisposition in &amp;quot;Patient Expired&amp;quot;
            or InpatientEncounter.hospitalization.dischargeDisposition in &amp;quot;Left Against Medical Advice&amp;quot;
        )
  )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="16"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="SupplementalDataElements"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Race"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Race&amp;quot;:
  Patient.race R
    return Tuple {
      codes: R.ombCategory union R.detailed,
      display: R.text
    }"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="17"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CMS506FHIRSafeUseofOpioids"></valueString>
            </extension>
            <extension url="name">
               <valueString value="SDE Race"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define &amp;quot;SDE Race&amp;quot;:
  SDE.&amp;quot;SDE Race&amp;quot;"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="18"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="QICoreCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="isCommunity"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns true if the given MedicationRequest has a category of Community
*/
define fluent function isCommunity(medicationRequest MedicationRequest):
  exists (medicationRequest.category C
    where C ~ Community
  )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="19"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="FHIRHelpers"></valueString>
            </extension>
            <extension url="name">
               <valueString value="ToConcept"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.
*/
define function ToConcept(concept FHIR.CodeableConcept):
    if concept is null then
        null
    else
        System.Concept {
            codes: concept.coding C return ToCode(C),
            display: concept.text.value
        }"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="20"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="QICoreCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="isDischarge"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns true if the given MedicationRequest has a category of Discharge
*/
define fluent function isDischarge(medicationRequest MedicationRequest):
  exists (medicationRequest.category C
    where C ~ Discharge
  )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="21"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="FHIRHelpers"></valueString>
            </extension>
            <extension url="name">
               <valueString value="ToString"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="define function ToString(value uri): value.value"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="22"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="FHIRHelpers"></valueString>
            </extension>
            <extension url="name">
               <valueString value="ToCode"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.
*/
define function ToCode(coding FHIR.Coding):
    if coding is null then
        null
    else
        System.Code {
          code: coding.code.value,
          system: coding.system.value,
          version: coding.version.value,
          display: coding.display.value
        }"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="23"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="QICoreCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="isProblemListItem"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns true if the given condition is a problem list item.
*/
define fluent function isProblemListItem(condition Condition):
  exists (condition.category C
    where C ~ &amp;quot;problem-list-item&amp;quot;
  )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="24"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="QICoreCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="isHealthConcern"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns true if the given condition is a health concern
*/
define fluent function isHealthConcern(condition Condition):
  exists (condition.category C
    where C ~ &amp;quot;health-concern&amp;quot;
  )"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="25"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="QICoreCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="prevalenceInterval"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns an interval representing the normalized prevalence period of a given Condition.
@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from
onset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting 
interval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.
*/
define fluent function prevalenceInterval(condition Condition):
if condition.clinicalStatus ~ &amp;quot;active&amp;quot;
  or condition.clinicalStatus ~ &amp;quot;recurrence&amp;quot;
  or condition.clinicalStatus ~ &amp;quot;relapse&amp;quot; then
  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]
else
    (end of condition.abatementInterval()) abatementDate
    return if abatementDate is null then
      Interval[start of condition.onset.toInterval(), abatementDate)
    else
      Interval[start of condition.onset.toInterval(), abatementDate]"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="26"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CQMCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="encounterDiagnosis"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns the Condition resources referenced by the diagnosis element of the Encounter
*/
define fluent function encounterDiagnosis(Encounter Encounter ):
  Encounter.diagnosis D
    return singleton from ([Condition] C where C.id = D.condition.reference.getId())"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="27"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="QICoreCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="getId"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Returns the tail of the given uri (i.e. everything after the last slash in the URI).
@comment: This function can be used to determine the logical id of a given resource. It can be used in
a single-server environment to trace references. However, this function does not attempt to resolve
or distinguish the base of the given url, and so cannot be used safely in multi-server environments.
*/
define fluent function getId(uri String):
  Last(Split(uri, &amp;#39;/&amp;#39;))"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="28"></valueInteger>
            </extension>
         </extension>
         <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition">
            <extension url="libraryName">
               <valueString value="CQMCommon"></valueString>
            </extension>
            <extension url="name">
               <valueString value="hospitalizationWithObservation"></valueString>
            </extension>
            <extension url="statement">
               <valueString value="/*
@description: Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter
*/
define fluent function hospitalizationWithObservation(TheEncounter Encounter ):
  TheEncounter Visit
  		let ObsVisit: Last([Encounter: &amp;quot;Observation Services&amp;quot;] LastObs
  				where LastObs.status = &amp;#39;finished&amp;#39;
            and LastObs.period ends 1 hour or less on or before start of Visit.period
  				sort by end of period
  			),
  			VisitStart: Coalesce(start of ObsVisit.period, start of Visit.period),
  			EDVisit: Last([Encounter: &amp;quot;Emergency Department Visit&amp;quot;] LastED
  				where LastED.status = &amp;#39;finished&amp;#39;
            and LastED.period ends 1 hour or less on or before VisitStart
  				sort by end of period
  			)
  		return Interval[Coalesce(start of EDVisit.period, VisitStart), end of Visit.period]"></valueString>
            </extension>
            <extension url="displaySequence">
               <valueInteger value="29"></valueInteger>
            </extension>
         </extension>
         <name value="EffectiveDataRequirements"></name>
         <status value="active"></status>
         <type>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/library-type"></system>
               <code value="module-definition"></code>
            </coding>
         </type>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Library SDE"></display>
            <resource value="https://madie.cms.gov/Library/SupplementalDataElements|3.5.000"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Library CQMCommon"></display>
            <resource value="https://madie.cms.gov/Library/CQMCommon|2.2.000"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Library FHIRHelpers"></display>
            <resource value="https://madie.cms.gov/Library/FHIRHelpers|4.4.000"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Library QICoreCommon"></display>
            <resource value="https://madie.cms.gov/Library/QICoreCommon|2.1.000"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Code system AdministrativeGender"></display>
            <resource value="http://hl7.org/fhir/administrative-gender"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Code system MedicationRequestCategory"></display>
            <resource value="http://terminology.hl7.org/CodeSystem/medicationrequest-category"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Code system ConditionCategory"></display>
            <resource value="http://terminology.hl7.org/CodeSystem/condition-category"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Code system USCoreConditionCategoryExtensionCodes"></display>
            <resource value="http://hl7.org/fhir/us/core/CodeSystem/condition-category"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Encounter Inpatient"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Schedule II, III and IV Opioid Medications"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Schedule IV Benzodiazepines"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Payer Type"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Cancer Related Pain"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Sickle Cell Disease with and without Crisis"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Medications for Opioid Use Disorder (MOUD)"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Opioid Medication Assisted Treatment (MAT)"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Opioid Use Disorder"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Palliative or Hospice Care"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Observation Services"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Emergency Department Visit"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Discharge To Acute Care Facility"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Hospice Care Referral or Admission"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Patient Expired"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309"></resource>
         </relatedArtifact>
         <relatedArtifact>
            <type value="depends-on"></type>
            <display value="Value set Left Against Medical Advice"></display>
            <resource value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.308"></resource>
         </relatedArtifact>
         <parameter>
            <name value="Measurement Period"></name>
            <use value="in"></use>
            <min value="0"></min>
            <max value="1"></max>
            <type value="Period"></type>
         </parameter>
         <parameter>
            <name value="Numerator"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="*"></max>
            <type value="Resource"></type>
         </parameter>
         <parameter>
            <name value="Denominator"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="*"></max>
            <type value="Resource"></type>
         </parameter>
         <parameter>
            <name value="Initial Population"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="*"></max>
            <type value="Resource"></type>
         </parameter>
         <parameter>
            <name value="Denominator Exclusion"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="*"></max>
            <type value="Resource"></type>
         </parameter>
         <parameter>
            <name value="SDE Sex"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="1"></max>
            <type value="Coding"></type>
         </parameter>
         <parameter>
            <name value="SDE Payer"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="*"></max>
            <type value="Resource"></type>
         </parameter>
         <parameter>
            <name value="SDE Ethnicity"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="1"></max>
            <type value="Resource"></type>
         </parameter>
         <parameter>
            <name value="SDE Race"></name>
            <use value="out"></use>
            <min value="0"></min>
            <max value="1"></max>
            <type value="Resource"></type>
         </parameter>
         <dataRequirement>
            <type value="Patient"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"></profile>
            <mustSupport value="gender"></mustSupport>
            <mustSupport value="gender.value"></mustSupport>
            <mustSupport value="url"></mustSupport>
            <mustSupport value="extension"></mustSupport>
         </dataRequirement>
         <dataRequirement>
            <type value="Encounter"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"></profile>
            <mustSupport value="type"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="period"></mustSupport>
            <mustSupport value="condition"></mustSupport>
            <mustSupport value="condition.reference"></mustSupport>
            <mustSupport value="condition.reference.value"></mustSupport>
            <mustSupport value="hospitalization"></mustSupport>
            <mustSupport value="hospitalization.dischargeDisposition"></mustSupport>
            <codeFilter>
               <path value="type"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Encounter"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"></profile>
            <mustSupport value="type"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="period"></mustSupport>
            <mustSupport value="condition"></mustSupport>
            <mustSupport value="condition.reference"></mustSupport>
            <mustSupport value="condition.reference.value"></mustSupport>
            <mustSupport value="hospitalization"></mustSupport>
            <mustSupport value="hospitalization.dischargeDisposition"></mustSupport>
            <codeFilter>
               <path value="type"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Encounter"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"></profile>
            <mustSupport value="type"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="period"></mustSupport>
            <mustSupport value="condition"></mustSupport>
            <mustSupport value="condition.reference"></mustSupport>
            <mustSupport value="condition.reference.value"></mustSupport>
            <mustSupport value="hospitalization"></mustSupport>
            <mustSupport value="hospitalization.dischargeDisposition"></mustSupport>
            <codeFilter>
               <path value="type"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="MedicationRequest"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"></profile>
            <mustSupport value="medication"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="intent"></mustSupport>
            <mustSupport value="intent.value"></mustSupport>
            <mustSupport value="authoredOn"></mustSupport>
            <mustSupport value="authoredOn.value"></mustSupport>
            <codeFilter>
               <path value="medication"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="MedicationRequest"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"></profile>
            <mustSupport value="medication"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="intent"></mustSupport>
            <mustSupport value="intent.value"></mustSupport>
            <mustSupport value="authoredOn"></mustSupport>
            <mustSupport value="authoredOn.value"></mustSupport>
            <codeFilter>
               <path value="medication"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="MedicationRequest"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"></profile>
            <mustSupport value="medication"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="intent"></mustSupport>
            <mustSupport value="intent.value"></mustSupport>
            <mustSupport value="authoredOn"></mustSupport>
            <mustSupport value="authoredOn.value"></mustSupport>
            <codeFilter>
               <path value="medication"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="MedicationRequest"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"></profile>
            <mustSupport value="medication.reference"></mustSupport>
            <mustSupport value="status"></mustSupport>
            <mustSupport value="status.value"></mustSupport>
            <mustSupport value="intent"></mustSupport>
            <mustSupport value="intent.value"></mustSupport>
            <mustSupport value="authoredOn"></mustSupport>
            <mustSupport value="authoredOn.value"></mustSupport>
            <mustSupport value="medication"></mustSupport>
         </dataRequirement>
         <dataRequirement>
            <type value="Medication"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication"></profile>
            <mustSupport value="id"></mustSupport>
         </dataRequirement>
         <dataRequirement>
            <type value="Coverage"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage"></profile>
            <mustSupport value="type"></mustSupport>
            <mustSupport value="period"></mustSupport>
            <codeFilter>
               <path value="type"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Condition"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"></profile>
            <mustSupport value="id"></mustSupport>
            <mustSupport value="id.value"></mustSupport>
            <mustSupport value="code"></mustSupport>
         </dataRequirement>
         <dataRequirement>
            <type value="Condition"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"></profile>
            <mustSupport value="code"></mustSupport>
            <codeFilter>
               <path value="code"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Condition"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"></profile>
            <mustSupport value="code"></mustSupport>
            <codeFilter>
               <path value="code"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Condition"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"></profile>
            <mustSupport value="code"></mustSupport>
            <codeFilter>
               <path value="code"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Procedure"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"></profile>
            <mustSupport value="code"></mustSupport>
            <mustSupport value="performed"></mustSupport>
            <codeFilter>
               <path value="code"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="Procedure"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"></profile>
            <mustSupport value="code"></mustSupport>
            <codeFilter>
               <path value="code"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579"></valueSet>
            </codeFilter>
         </dataRequirement>
         <dataRequirement>
            <type value="ServiceRequest"></type>
            <profile value="http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"></profile>
            <mustSupport value="code"></mustSupport>
            <codeFilter>
               <path value="code"></path>
               <valueSet value="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579"></valueSet>
            </codeFilter>
         </dataRequirement>
      </Library>
   </contained>
   <extension id="supplementalDataGuidance" url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-supplementalDataGuidance">
      <extension url="guidance">
         <valueString value="For every patient evaluated by this measure also identify payer, race, ethnicity and sex; 
SDE Ethnicity 
SDE Payer 
SDE Race 
SDE Sex 
 "></valueString>
      </extension>
      <extension url="usage">
         <valueCodeableConcept>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-data-usage"></system>
               <code value="supplemental-data"></code>
               <display value="Supplemental Data"></display>
            </coding>
            <text value="Supplemental Data Guidance"></text>
         </valueCodeableConcept>
      </extension>
   </extension>
   <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-effectiveDataRequirements">
      <valueReference>
         <reference value="#effective-data-requirements"></reference>
      </valueReference>
   </extension>
   <url value="https://madie.cms.gov/Measure/CMS506FHIRSafeUseofOpioids"></url>
   <identifier>
      <use value="usual"></use>
      <type>
         <coding>
            <system value="http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type"></system>
            <code value="short-name"></code>
            <display value="Short Name"></display>
         </coding>
      </type>
      <system value="https://madie.cms.gov/measure/shortName"></system>
      <value value="CMS506FHIR "></value>
   </identifier>
   <identifier>
      <use value="official"></use>
      <type>
         <coding>
            <system value="http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type"></system>
            <code value="version-independent"></code>
            <display value="Version Independent"></display>
         </coding>
      </type>
      <system value="urn:ietf:rfc:3986"></system>
      <value value="urn:uuid:95d529af-66b4-4cfd-bc1f-f43704dc47ad"></value>
   </identifier>
   <identifier>
      <use value="official"></use>
      <type>
         <coding>
            <system value="http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type"></system>
            <code value="version-specific"></code>
            <display value="Version Specific"></display>
         </coding>
      </type>
      <system value="urn:ietf:rfc:3986"></system>
      <value value="urn:uuid:c8f62fe1-8d6d-4e05-9574-7f89899e4ec7"></value>
   </identifier>
   <identifier>
      <use value="official"></use>
      <type>
         <coding>
            <system value="http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type"></system>
            <code value="endorser"></code>
            <display value="Endorser"></display>
         </coding>
      </type>
      <system value="https://madie.cms.gov/measure/cbeId"></system>
      <value value="3316e"></value>
      <assigner>
         <display value="CMS Consensus Based Entity"></display>
      </assigner>
   </identifier>
   <identifier>
      <use value="official"></use>
      <type>
         <coding>
            <system value="http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type"></system>
            <code value="publisher"></code>
            <display value="Publisher"></display>
         </coding>
      </type>
      <system value="https://madie.cms.gov/measure/cmsId"></system>
      <value value="506FHIR"></value>
      <assigner>
         <display value="CMS"></display>
      </assigner>
   </identifier>
   <version value="Draft based on 0.2.001"></version>
   <name value="CMS506FHIRSafeUseofOpioids"></name>
   <title value="Safe Use of Opioids Concurrent PrescribingFHIR"></title>
   <status value="draft"></status>
   <experimental value="false"></experimental>
   <date value="2024-11-26T19:15:52+00:00"></date>
   <publisher value="Centers for Medicare &amp; Medicaid Services (CMS)"></publisher>
   <contact>
      <telecom>
         <system value="url"></system>
         <value value="https://www.cms.gov/"></value>
      </telecom>
   </contact>
   <description value="Proportion of inpatient hospitalizations for patients 18 years of age and older prescribed, or continued on, two or more opioids or an opioid and benzodiazepine concurrently at discharge"></description>
   <purpose value="UNKNOWN"></purpose>
   <usage value="Clinician judgement, clinical appropriateness, or both may indicate concurrent prescribing of two unique opioids or an opioid and benzodiazepine is medically necessary, thus the measure is not expected to have a zero rate. 

Inpatient hospitalizations with discharge medications of an opioid or benzodiazepine prescription should be included in the initial population. 

Inpatient hospitalizations with discharge medications of two or more opioids or an opioid and benzodiazepine resulting in concurrent therapy at discharge should be included in the numerator. Each benzodiazepine and opioid included on the medication discharge list is considered a unique prescription.

The denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.

This eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period. 

This FHIR-based measure has been derived from the QDM-based measure: CMS 506v8.0. Please refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU4.1.1/) for more information on QI-Core and mapping recommendations from QDM to QI-Core 4.1.1 (https://hl7.org/fhir/us/qicore/STU4.1.1/qdm-to-qicore.html)."></usage>
   <copyright value="Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. Mathematica disclaims all liability for use or accuracy of any third-party codes contained in the specifications.

CPT(R) contained in the measure specifications is copyright 2004-2024 American Medical Association. LOINC(R) copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 copyright 2024 World Health Organization. All Rights Reserved."></copyright>
   <effectivePeriod>
      <start value="2026-01-01"></start>
      <end value="2026-12-31"></end>
   </effectivePeriod>
   <author>
      <name value="Mathematica"></name>
      <telecom>
         <system value="url"></system>
         <value value="https://www.mathematica.org/"></value>
      </telecom>
   </author>
   <library value="https://madie.cms.gov/Library/CMS506FHIRSafeUseofOpioids"></library>
   <disclaimer value="These performance measures are not clinical guidelines, do not establish a standard of medical care, and have not been tested for all potential applications.

THE MEASURES AND SPECIFICATION ARE PROVIDED AS IS WITHOUT WARRANTY OF ANY KIND.

Due to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM]."></disclaimer>
   <rationale value="Unintentional opioid overdose fatalities have become a major public health concern in the United States (Rudd, Aleshire, Zibbel, &amp; Gladden, 2016). Reducing the number of unintentional overdoses has become a priority for numerous federal organizations including, but not limited to, the Centers for Disease Control and Prevention (CDC), the Federal Interagency Workgroup for Opioid Adverse Drug Events, and the Substance Abuse and Mental Health Services Administration. 

Concurrent prescriptions of opioids or opioids and benzodiazepines places patients at a greater risk of unintentional overdose due to the increased risk of respiratory depression (Dowell, Haegerich, &amp; Chou, 2016; Dowell, Ragan, Jones, Baldwin, &amp; Chou, 2022). An analysis of national prescribing patterns shows that more than half of patients who received an opioid prescription in 2009 had filled another opioid prescription within the previous 30 days (National Institute on Drug Abuse, 2011). Studies of multiple claims and prescription databases have shown that between 5%-15% of patients receive concurrent opioid prescriptions and 5%-20% of patients receive concurrent opioid and benzodiazepine prescriptions across various settings (Liu et al., 2013; Mack et al., 2015, Park et al., 2015). Patients who have multiple opioid prescriptions have an increased risk for overdose (Jena et al., 2014). Rates of fatal overdose are ten times higher in patients who are co-dispensed opioid analgesics and benzodiazepines than opioids alone (Dasgupta et al., 2015). The number of opioid overdose deaths involving benzodiazepines increased 14% on average each year from 2006 to 2011, while the number of opioid analgesic overdose deaths not involving benzodiazepines did not change significantly (Jones &amp; McAninch, 2015). Furthermore, concurrent use of benzodiazepines with opioids was prevalent in 31%-51% of fatal overdoses (Dowell, Haegerich, &amp; Chou, 2016). One study found that eliminating concurrent use of opioids and benzodiazepines could reduce the risk of opioid overdose-related emergency department (ED) and inpatient visits by 15% and potentially could have prevented an estimated 2,630 deaths related to opioid painkiller overdoses in 2015 (Sun, Dixit, Humphreys, Darnall, &amp; Mackey, 2017). 

A study on The Opioid Safety Initiative in the Veterans Health Administration (VHA), which includes an opioid and benzodiazepine concurrent prescribing measure that this measure is based on, was associated with a decrease of 20.67% overall and 0.86% patients per month (781 patients per month) receiving concurrent benzodiazepine with an opioid among all adult VHA patients who filled outpatient opioid prescriptions from October 2012 to September 2014 (Lin, Bohnert, Kerns, Clay, Ganoczy, &amp; Ilgen, 2017).

Adopting a measure that calculates the proportion of patients with two or more opioids or opioids and benzodiazepines concurrently has the potential to reduce preventable mortality and reduce the costs associated with adverse events related to opioid use by (1) encouraging providers to identify patients with concurrent prescriptions of opioids or opioids and benzodiazepines and (2) discouraging providers from prescribing two or more opioids or opioids and benzodiazepines concurrently."></rationale>
   <clinicalRecommendationStatement value="The CDC Clinical Practice Guideline for Prescribing Opioids for Pain — United States, 2022 recommends that clinicians should:
- “[Use strategies minimizing] opioid use…for both opioid-naïve and opioid-tolerant patients with acute pain when possible. If patients receiving long-term opioid therapy require additional medication for acute pain, nonopioid medications should be used when possible.”
- ”Use particular caution when prescribing opioid pain medication and benzodiazepines concurrently.&quot;
- “Review increased risks for respiratory depression when opioids are taken with benzodiazepines, other sedatives, alcohol, nonprescribed or illicit drugs (e.g., heroin), or other opioids (see Recommendations 8 and 11)”
- “Closely monitor patients who are unable to taper and who continue on high-dose or otherwise high-risk opioid regimens (e.g., opioids prescribed concurrently with benzodiazepines) and should work with patients to mitigate overdose risk (e.g., by providing overdose education and naloxone) (see Recommendation 8).”
- &quot;Discuss information from the PDMP with the patient and confirm that the patient is aware of any additional prescriptions.”
- “Discuss safety concerns, including increased risk for respiratory depression and overdose, with patients found to be receiving overlapping prescription opioids from multiple clinicians who are not coordinating the patient’s care or patients who are receiving medications that increase risk when combined with opioids (e.g., benzodiazepines) (see Recommendation 11), and offer naloxone (see Recommendation 8).&quot;
- &quot;Discuss safety concerns with other clinicians who are prescribing controlled substances for the patient. Ideally, clinicians should first discuss concerns with the patient and inform them that they plan to coordinate care with their other clinicians to improve the patient’s safety.”

In addition to the 2022 CDC Clinical Practice Guideline for Prescribing Opioids for Pain, opioid prescribing guidelines issued by various state agencies and professional societies for various settings agree with the recommendation to avoid concurrently prescribing opioids  (American Academy of Emergency Medicine (AAEM), 2013; and Washington Agency Medical Directors’ Group (WAMDG), 2015), and opioids and benzodiazepines (WAMDG, 2015; American Society of Interventional Pain Physicians (ASIPP), 2012;, and New York City Department Of Health and Mental Hygiene (NYC DPOMH), 2013) whenever possible as the combination of these medications may potentiate opioid-induced respiratory depression."></clinicalRecommendationStatement>
   <guidance value="Clinician judgement, clinical appropriateness, or both may indicate concurrent prescribing of two unique opioids or an opioid and benzodiazepine is medically necessary, thus the measure is not expected to have a zero rate. 

Inpatient hospitalizations with discharge medications of an opioid or benzodiazepine prescription should be included in the initial population. 

Inpatient hospitalizations with discharge medications of two or more opioids or an opioid and benzodiazepine resulting in concurrent therapy at discharge should be included in the numerator. Each benzodiazepine and opioid included on the medication discharge list is considered a unique prescription.

The denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.

This eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period. 

This FHIR-based measure has been derived from the QDM-based measure: CMS 506v8.0. Please refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU4.1.1/) for more information on QI-Core and mapping recommendations from QDM to QI-Core 4.1.1 (https://hl7.org/fhir/us/qicore/STU4.1.1/qdm-to-qicore.html)."></guidance>
   <group id="67460a2f46b6174510cfea5f">
      <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring">
         <valueCodeableConcept>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-scoring"></system>
               <code value="proportion"></code>
               <display value="Proportion"></display>
            </coding>
         </valueCodeableConcept>
      </extension>
      <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis">
         <valueCode value="Encounter"></valueCode>
      </extension>
      <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type">
         <valueCodeableConcept>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-type"></system>
               <code value="process"></code>
               <display value="Process"></display>
            </coding>
         </valueCodeableConcept>
      </extension>
      <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-rateAggregation">
         <valueCode value="None"></valueCode>
      </extension>
      <extension url="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-improvementNotation">
         <valueCodeableConcept>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-improvement-notation"></system>
               <code value="decrease"></code>
               <display value="Decreased score indicates improvement"></display>
            </coding>
         </valueCodeableConcept>
      </extension>
      <description value="Proportion of inpatient hospitalizations for patients 18 years of age and older prescribed two or more opioids or an opioid and benzodiazepine concurrently at discharge."></description>
      <population id="345E1255-3623-402A-9016-2B5C9E096C26">
         <code>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-population"></system>
               <code value="initial-population"></code>
               <display value="Initial Population"></display>
            </coding>
         </code>
         <description value="Inpatient hospitalizations that end during the measurement period, where the patient is 18 years of age and older at the start of the encounter and prescribed one opioid and/or benzodiazepine at discharge"></description>
         <criteria>
            <language value="text/cql-identifier"></language>
            <expression value="Initial Population"></expression>
         </criteria>
      </population>
      <population id="9ED4F80C-B465-4CDB-BFDD-CE376A165DD0">
         <code>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-population"></system>
               <code value="denominator"></code>
               <display value="Denominator"></display>
            </coding>
         </code>
         <description value="Equals Initial Population"></description>
         <criteria>
            <language value="text/cql-identifier"></language>
            <expression value="Denominator"></expression>
         </criteria>
      </population>
      <population id="25C57870-241A-428F-BDA8-63C5B4685EE4">
         <code>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-population"></system>
               <code value="denominator-exclusion"></code>
               <display value="Denominator Exclusion"></display>
            </coding>
         </code>
         <description value="Inpatient hospitalizations where patients have cancer pain that begins prior to or during the encounter or are ordered or are receiving palliative or hospice care (including comfort measures, terminal care, and dying care) during the hospitalization or in an emergency department encounter or observation stay immediately prior to hospitalization, patients receiving medication for opioid use disorder (OUD) with active OUD diagnosis or Opioid Medication Assisted Treatment (MAT), patients with sickle cell disease, patients discharged to another inpatient care facility or left against medical advice, and patients who expire during the inpatient stay"></description>
         <criteria>
            <language value="text/cql-identifier"></language>
            <expression value="Denominator Exclusion"></expression>
         </criteria>
      </population>
      <population id="C36B952C-8CCF-436F-A9E2-423A00C56A1A">
         <code>
            <coding>
               <system value="http://terminology.hl7.org/CodeSystem/measure-population"></system>
               <code value="numerator"></code>
               <display value="Numerator"></display>
            </coding>
         </code>
         <description value="Inpatient hospitalizations where the patient is prescribed two or more opioids or an opioid and benzodiazepine at discharge"></description>
         <criteria>
            <language value="text/cql-identifier"></language>
            <expression value="Numerator"></expression>
         </criteria>
      </population>
   </group>
   <supplementalData id="sde-ethnicity">
      <usage>
         <coding>
            <system value="http://terminology.hl7.org/CodeSystem/measure-data-usage"></system>
            <code value="supplemental-data"></code>
         </coding>
      </usage>
      <description value="SDE Ethnicity"></description>
      <criteria>
         <language value="text/cql-identifier"></language>
         <expression value="SDE Ethnicity"></expression>
      </criteria>
   </supplementalData>
   <supplementalData id="sde-payer">
      <usage>
         <coding>
            <system value="http://terminology.hl7.org/CodeSystem/measure-data-usage"></system>
            <code value="supplemental-data"></code>
         </coding>
      </usage>
      <description value="SDE Payer"></description>
      <criteria>
         <language value="text/cql-identifier"></language>
         <expression value="SDE Payer"></expression>
      </criteria>
   </supplementalData>
   <supplementalData id="sde-race">
      <usage>
         <coding>
            <system value="http://terminology.hl7.org/CodeSystem/measure-data-usage"></system>
            <code value="supplemental-data"></code>
         </coding>
      </usage>
      <description value="SDE Race"></description>
      <criteria>
         <language value="text/cql-identifier"></language>
         <expression value="SDE Race"></expression>
      </criteria>
   </supplementalData>
   <supplementalData id="sde-sex">
      <usage>
         <coding>
            <system value="http://terminology.hl7.org/CodeSystem/measure-data-usage"></system>
            <code value="supplemental-data"></code>
         </coding>
      </usage>
      <description value="SDE Sex"></description>
      <criteria>
         <language value="text/cql-identifier"></language>
         <expression value="SDE Sex"></expression>
      </criteria>
   </supplementalData>
</Measure>